<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç­›é€‰ç³»ç»Ÿ - iOSé£æ ¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f5f5;
        }

        /* é¡¶éƒ¨å›ºå®šåŒºåŸŸ */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #fff;
            z-index: 100;
        }

        /* æœç´¢æ  */
        .search-bar {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid #f0f0f0;
        }

        .search-input-wrapper {
            flex: 1;
            position: relative;
        }

        .search-input {
            width: 100%;
            height: 36px;
            padding: 0 36px;
            border: 1px solid #e0e0e0;
            border-radius: 18px;
            font-size: 14px;
            background: #f8f8f8;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
            font-size: 14px;
        }

        .clear-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
            cursor: pointer;
            display: none;
            font-size: 18px;
        }

        .search-input:not(:placeholder-shown) ~ .clear-icon {
            display: block;
        }

        /* ç­›é€‰å…¥å£æ  */
        .filter-tabs {
            display: flex;
            background: #fff;
            border-bottom: 1px solid #f0f0f0;
        }

        .filter-tab {
            flex: 1;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            font-size: 14px;
            color: #333;
            cursor: pointer;
            position: relative;
            border: none;
            background: none;
        }

        .filter-tab.active {
            color: #007AFF;
        }

        .filter-tab-arrow {
            font-size: 12px;
            transition: transform 0.3s;
        }

        .filter-tab.active .filter-tab-arrow {
            transform: rotate(180deg);
        }

        .filter-tab-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #007AFF;
            color: #fff;
            font-size: 10px;
            min-width: 16px;
            height: 16px;
            border-radius: 8px;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
        }

        .filter-tab-badge.show {
            display: flex;
        }

        /* é®ç½©å±‚ - ä»ç­›é€‰æ ä¸‹æ–¹å¼€å§‹ */
        .panel-overlay {
            position: fixed;
            top: 104px;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 90;
            display: none;
        }

        .panel-overlay.show {
            display: block;
        }

        /* ç­›é€‰é¢æ¿å®¹å™¨ - æµ®å±‚å®šä½ */
        .filter-panels-container {
            position: fixed;
            top: 104px;
            left: 0;
            right: 0;
            z-index: 91;
            pointer-events: none;
        }

        .filter-panels-container > * {
            pointer-events: auto;
        }

        /* å“ç±»é¢æ¿ - æ ¹æ®å†…å®¹é«˜åº¦ */
        .category-panel {
            background: #fff;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .category-panel.show {
            max-height: 300px;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1px;
            background: #f0f0f0;
        }

        .category-item {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            background: #fff;
            cursor: pointer;
            border: none;
            padding: 8px;
        }

        .category-item.active {
            background: #e8f4ff;
            color: #007AFF;
        }

        .category-icon {
            font-size: 24px;
        }

        .category-name {
            font-size: 12px;
            color: #333;
        }

        .category-item.active .category-name {
            color: #007AFF;
            font-weight: 500;
        }

        /* æˆå‘˜é€‰æ‹©é¢æ¿ - å›ºå®šé«˜åº¦60vh */
        .member-panel {
            background: #fff;
            height: 0;
            overflow: hidden;
            transition: height 0.3s;
            display: flex;
            flex-direction: column;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .member-panel.show {
            height: 60vh;
        }

        /* å·²é€‰æˆå‘˜åŒºåŸŸ */
        .selected-members {
            padding: 12px 16px;
            background: #f8f8f8;
            border-bottom: 1px solid #f0f0f0;
            display: none;
            flex-shrink: 0;
        }

        .selected-members.show {
            display: block;
        }

        .selected-members-title {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
        }

        .selected-members-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .selected-member-tag {
            padding: 5px 10px;
            border-radius: 14px;
            background: #007AFF;
            color: #fff;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .selected-member-remove {
            cursor: pointer;
            font-size: 14px;
            line-height: 1;
        }

        .member-search-wrapper {
            padding: 12px 16px;
            background: #fff;
            border-bottom: 1px solid #f0f0f0;
            flex-shrink: 0;
            position: relative;
        }

        .member-search {
            width: 100%;
            height: 36px;
            padding: 0 12px 0 36px;
            border: 1px solid #e0e0e0;
            border-radius: 18px;
            font-size: 14px;
            background: #f8f8f8;
        }

        .member-search-icon {
            position: absolute;
            left: 28px;
            top: 22px;
            color: #999;
            font-size: 14px;
        }

        .member-groups {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .member-group {
            border-bottom: 1px solid #f5f5f5;
        }

        .member-group-header {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            cursor: pointer;
            user-select: none;
            background: #fafafa;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .group-expand-icon {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #999;
            transition: transform 0.2s;
            margin-right: 8px;
        }

        .member-group.expanded .group-expand-icon {
            transform: rotate(90deg);
        }

        .member-group-title {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            flex: 1;
        }

        .member-count {
            font-size: 12px;
            color: #999;
        }

        .member-list {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s;
            background: #fff;
        }

        .member-group.expanded .member-list {
            max-height: 1000px;
        }

        .member-item {
            padding: 10px 16px 10px 40px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            border-bottom: 1px solid #f5f5f5;
            position: relative;
        }

        .member-item:last-child {
            border-bottom: none;
        }

        .member-item.active::before {
            content: 'âœ“';
            position: absolute;
            left: 16px;
            color: #007AFF;
            font-weight: 600;
            font-size: 16px;
        }

        .member-item.active {
            background: #f8f9fa;
        }

        .member-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
            font-weight: 500;
        }

        .member-info {
            flex: 1;
            min-width: 0;
        }

        .member-name {
            font-size: 14px;
            color: #333;
            margin-bottom: 2px;
        }

        .member-dept {
            font-size: 12px;
            color: #999;
        }

        .member-tag {
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 2px;
            background: #f5f5f5;
            color: #999;
            flex-shrink: 0;
        }

        /* ç»¼åˆç­›é€‰é¢æ¿ - å›ºå®šé«˜åº¦60vh */
        .filter-panel {
            background: #fff;
            height: 0;
            overflow: hidden;
            transition: height 0.3s;
            display: flex;
            flex-direction: column;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .filter-panel.show {
            height: 60vh;
        }

        .filter-panel-content {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 60px;
        }

        /* ç­›é€‰åˆ†ç»„ */
        .filter-group {
            padding: 16px;
            border-bottom: 1px solid #f5f5f5;
        }

        .filter-group-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .filter-group-title {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .filter-group-more {
            font-size: 13px;
            color: #007AFF;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 2px;
        }

        .filter-group-selected {
            font-size: 12px;
            color: #007AFF;
            margin-left: 8px;
        }

        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .filter-option {
            padding: 7px 14px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            background: #fff;
            font-size: 13px;
            color: #333;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-option.active {
            background: #007AFF;
            color: #fff;
            border-color: #007AFF;
        }

        /* åº•éƒ¨æ“ä½œæ  */
        .filter-footer {
            flex-shrink: 0;
            padding: 8px 16px;
            background: #fff;
            border-top: 1px solid #f0f0f0;
            display: flex;
            gap: 12px;
            box-shadow: 0 -2px 8px rgba(0,0,0,0.08);
        }

        .footer-btn {
            flex: 1;
            height: 40px;
            border: none;
            border-radius: 4px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
        }

        .reset-btn {
            background: #f5f5f5;
            color: #666;
        }

        .confirm-btn {
            background: #007AFF;
            color: #fff;
        }

        /* æ—¶é—´é€‰æ‹© */
        .date-picker {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .date-quick-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 8px;
        }

        .date-input-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .date-input {
            flex: 1;
            height: 36px;
            padding: 0 12px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 13px;
        }

        .date-separator {
            color: #999;
        }

        /* å†…å®¹åŒºåŸŸ - ä¸å—ç­›é€‰é¢æ¿å½±å“ */
        .content {
            margin-top: 104px;
            padding: 12px 16px;
        }

        .result-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 0 12px 0;
            font-size: 13px;
            color: #666;
        }

        .result-count strong {
            color: #007AFF;
        }

        .sort-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border: none;
            background: none;
            color: #666;
            font-size: 13px;
            cursor: pointer;
        }

        /* åˆ—è¡¨é¡¹ */
        .list-item {
            background: #fff;
            padding: 12px;
            margin-bottom: 12px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }

        .item-header {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 10px;
        }

        .item-image {
            width: 80px;
            height: 80px;
            border-radius: 4px;
            background: #f5f5f5;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .item-main {
            flex: 1;
            min-width: 0;
        }

        .item-title {
            font-size: 15px;
            font-weight: 500;
            color: #333;
            margin-bottom: 6px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .item-tags {
            display: flex;
            gap: 6px;
            margin-bottom: 6px;
        }

        .item-tag {
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 11px;
            background: #f5f5f5;
            color: #666;
        }

        .item-tag.brand {
            background: #e8f4ff;
            color: #007AFF;
        }

        .item-tag.status {
            background: #e8f5e9;
            color: #388e3c;
        }

        .item-info {
            font-size: 12px;
            color: #999;
            line-height: 1.6;
        }

        .item-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 8px;
            border-top: 1px solid #f5f5f5;
        }

        .item-price {
            font-size: 18px;
            font-weight: 600;
            color: #007AFF;
        }

        .item-time {
            font-size: 12px;
            color: #999;
        }

        /* å“ç‰ŒäºŒçº§é¡µ */
        .sub-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #fff;
            z-index: 200;
            transform: translateX(100%);
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
        }

        .sub-page.show {
            transform: translateX(0);
        }

        .sub-page-header {
            padding: 0 16px;
            height: 56px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid #f0f0f0;
            background: #fff;
        }

        .back-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: none;
            font-size: 24px;
            cursor: pointer;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sub-page-title {
            font-size: 17px;
            font-weight: 600;
            flex: 1;
        }

        .sub-page-confirm {
            padding: 6px 16px;
            border: none;
            background: #007AFF;
            color: #fff;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
        }

        .sub-page-body {
            flex: 1;
            overflow-y: auto;
        }

        /* å­—æ¯ç´¢å¼• */
        .alphabet-index {
            position: fixed;
            right: 4px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 1px;
            z-index: 10;
        }

        .alphabet-item {
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #999;
            font-weight: 500;
        }

        .alphabet-item.active {
            color: #007AFF;
            font-weight: 600;
        }

        /* å­—æ¯åˆ†ç»„ */
        .letter-group {
            padding: 0 16px;
        }

        .letter-header {
            padding: 8px 0;
            font-size: 13px;
            font-weight: 600;
            color: #999;
            position: sticky;
            top: 0;
            background: #fff;
            z-index: 1;
        }

        .letter-brands {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding-bottom: 12px;
        }

        /* æœç´¢é«˜äº® */
        .highlight {
            background: #fff3cd;
            padding: 0 2px;
        }

        /* ç©ºçŠ¶æ€ */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        .empty-text {
            font-size: 14px;
        }

        /* é”®ç›˜å¼¹èµ·æ—¶çš„ä¼˜åŒ– */
        body.keyboard-open .member-panel.show,
        body.keyboard-open .filter-panel.show {
            height: calc(100vh - 104px - var(--keyboard-height, 300px));
        }

        /* æ— ç»“æœæç¤º */
        .no-result {
            padding: 40px 20px;
            text-align: center;
            color: #999;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å›ºå®šåŒºåŸŸ -->
    <div class="header">
        <!-- æœç´¢æ  -->
        <div class="search-bar">
            <div class="search-input-wrapper">
                <span class="search-icon">ğŸ”</span>
                <input type="text" class="search-input" placeholder="æœç´¢å•†å“åç§°ã€ç¼–å·ã€å®¢æˆ·..." id="searchInput">
                <span class="clear-icon" onclick="clearSearch()">âœ•</span>
            </div>
        </div>

        <!-- ç­›é€‰å…¥å£æ  -->
        <div class="filter-tabs">
            <button class="filter-tab" id="categoryTab" onclick="togglePanel('category')">
                <span>å“ç±»</span>
                <span class="filter-tab-arrow">â–¼</span>
                <span class="filter-tab-badge" id="categoryBadge">0</span>
            </button>
            <button class="filter-tab" id="staffTab" onclick="togglePanel('staff')">
                <span>å®¢æœ</span>
                <span class="filter-tab-arrow">â–¼</span>
                <span class="filter-tab-badge" id="staffBadge">0</span>
            </button>
            <button class="filter-tab" id="appraiserTab" onclick="togglePanel('appraiser')">
                <span>é‰´å®šå¸ˆ</span>
                <span class="filter-tab-arrow">â–¼</span>
                <span class="filter-tab-badge" id="appraiserBadge">0</span>
            </button>
            <button class="filter-tab" id="filterTab" onclick="togglePanel('filter')">
                <span>ç­›é€‰</span>
                <span class="filter-tab-arrow">â–¼</span>
                <span class="filter-tab-badge show" id="filterBadge">0</span>
            </button>
        </div>
    </div>

    <!-- é®ç½©å±‚ -->
    <div class="panel-overlay" id="panelOverlay" onclick="closeAllPanels()"></div>

    <!-- ç­›é€‰é¢æ¿å®¹å™¨ - æµ®å±‚ -->
    <div class="filter-panels-container">
        <!-- å“ç±»é¢æ¿ -->
        <div class="category-panel" id="categoryPanel">
            <div class="category-grid">
                <button class="category-item" onclick="selectCategory(this, 'æ‰‹è¢‹')">
                    <div class="category-icon">ğŸ‘œ</div>
                    <div class="category-name">æ‰‹è¢‹</div>
                </button>
                <button class="category-item" onclick="selectCategory(this, 'è…•è¡¨')">
                    <div class="category-icon">âŒš</div>
                    <div class="category-name">è…•è¡¨</div>
                </button>
                <button class="category-item" onclick="selectCategory(this, 'é¦–é¥°')">
                    <div class="category-icon">ğŸ’</div>
                    <div class="category-name">é¦–é¥°</div>
                </button>
                <button class="category-item" onclick="selectCategory(this, 'é…é¥°')">
                    <div class="category-icon">ğŸ§£</div>
                    <div class="category-name">é…é¥°</div>
                </button>
                <button class="category-item" onclick="selectCategory(this, 'é‹å±¥')">
                    <div class="category-icon">ğŸ‘Ÿ</div>
                    <div class="category-name">é‹å±¥</div>
                </button>
                <button class="category-item" onclick="selectCategory(this, 'æœè£…')">
                    <div class="category-icon">ğŸ‘”</div>
                    <div class="category-name">æœè£…</div>
                </button>
                <button class="category-item" onclick="selectCategory(this, 'ç®±åŒ…')">
                    <div class="category-icon">ğŸ§³</div>
                    <div class="category-name">ç®±åŒ…</div>
                </button>
                <button class="category-item" onclick="selectCategory(this, 'å…¶ä»–')">
                    <div class="category-icon">ğŸ“¦</div>
                    <div class="category-name">å…¶ä»–</div>
                </button>
            </div>
        </div>

        <!-- å®¢æœé€‰æ‹©é¢æ¿ (å¤šé€‰) -->
        <div class="member-panel" id="staffPanel">
            <!-- å·²é€‰æˆå‘˜ -->
            <div class="selected-members" id="selectedStaff">
                <div class="selected-members-title">å·²é€‰å®¢æœ</div>
                <div class="selected-members-list" id="selectedStaffList">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <div class="member-search-wrapper">
                <span class="member-search-icon">ğŸ”</span>
                <input type="text" class="member-search" id="staffSearch" placeholder="æœç´¢å®¢æœå§“å...">
            </div>
            <div class="member-groups" id="staffGroups">
                <!-- å®¢æœéƒ¨ -->
                <div class="member-group expanded">
                    <div class="member-group-header" onclick="toggleMemberGroup(this)">
                        <span class="group-expand-icon">â–¶</span>
                        <span class="member-group-title">å®¢æœéƒ¨</span>
                        <span class="member-count">8äºº</span>
                    </div>
                    <div class="member-list">
                        <!-- å®¢æœä¸€ç»„ -->
                        <div class="member-group">
                            <div class="member-group-header" onclick="toggleMemberGroup(this)">
                                <span class="group-expand-icon">â–¶</span>
                                <span class="member-group-title">å®¢æœä¸€ç»„</span>
                                <span class="member-count">4äºº</span>
                            </div>
                            <div class="member-list">
                                <div class="member-item" onclick="selectStaff(this, 'å¼ æ™“æ˜')" data-name="å¼ æ™“æ˜" data-dept="å®¢æœä¸€ç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">å¼ </div>
                                    <div class="member-info">
                                        <div class="member-name">å¼ æ™“æ˜</div>
                                        <div class="member-dept">å®¢æœä¸€ç»„</div>
                                    </div>
                                </div>
                                <div class="member-item" onclick="selectStaff(this, 'ææ€ä½³')" data-name="ææ€ä½³" data-dept="å®¢æœä¸€ç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">æ</div>
                                    <div class="member-info">
                                        <div class="member-name">ææ€ä½³</div>
                                        <div class="member-dept">å®¢æœä¸€ç»„</div>
                                    </div>
                                </div>
                                <div class="member-item" onclick="selectStaff(this, 'ç‹å»ºå›½')" data-name="ç‹å»ºå›½" data-dept="å®¢æœä¸€ç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">ç‹</div>
                                    <div class="member-info">
                                        <div class="member-name">ç‹å»ºå›½</div>
                                        <div class="member-dept">å®¢æœä¸€ç»„</div>
                                    </div>
                                    <span class="member-tag">å·²ç¦»èŒ</span>
                                </div>
                                <div class="member-item" onclick="selectStaff(this, 'é™ˆä¸½å')" data-name="é™ˆä¸½å" data-dept="å®¢æœä¸€ç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">é™ˆ</div>
                                    <div class="member-info">
                                        <div class="member-name">é™ˆä¸½å</div>
                                        <div class="member-dept">å®¢æœä¸€ç»„</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- å®¢æœäºŒç»„ -->
                        <div class="member-group">
                            <div class="member-group-header" onclick="toggleMemberGroup(this)">
                                <span class="group-expand-icon">â–¶</span>
                                <span class="member-group-title">å®¢æœäºŒç»„</span>
                                <span class="member-count">4äºº</span>
                            </div>
                            <div class="member-list">
                                <div class="member-item" onclick="selectStaff(this, 'åˆ˜å¼º')" data-name="åˆ˜å¼º" data-dept="å®¢æœäºŒç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">åˆ˜</div>
                                    <div class="member-info">
                                        <div class="member-name">åˆ˜å¼º</div>
                                        <div class="member-dept">å®¢æœäºŒç»„</div>
                                    </div>
                                </div>
                                <div class="member-item" onclick="selectStaff(this, 'èµµæ•')" data-name="èµµæ•" data-dept="å®¢æœäºŒç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);">èµµ</div>
                                    <div class="member-info">
                                        <div class="member-name">èµµæ•</div>
                                        <div class="member-dept">å®¢æœäºŒç»„</div>
                                    </div>
                                </div>
                                <div class="member-item" onclick="selectStaff(this, 'å­™æ‚¦')" data-name="å­™æ‚¦" data-dept="å®¢æœäºŒç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">å­™</div>
                                    <div class="member-info">
                                        <div class="member-name">å­™æ‚¦</div>
                                        <div class="member-dept">å®¢æœäºŒç»„</div>
                                    </div>
                                </div>
                                <div class="member-item" onclick="selectStaff(this, 'å‘¨æ°')" data-name="å‘¨æ°" data-dept="å®¢æœäºŒç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);">å‘¨</div>
                                    <div class="member-info">
                                        <div class="member-name">å‘¨æ°</div>
                                        <div class="member-dept">å®¢æœäºŒç»„</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="filter-footer">
                <button class="footer-btn reset-btn" onclick="resetStaff()">é‡ç½®</button>
                <button class="footer-btn confirm-btn" onclick="confirmPanel('staff')">ç¡®å®š</button>
            </div>
        </div>

        <!-- é‰´å®šå¸ˆé€‰æ‹©é¢æ¿ (å•é€‰) -->
        <div class="member-panel" id="appraiserPanel">
            <div class="member-search-wrapper">
                <span class="member-search-icon">ğŸ”</span>
                <input type="text" class="member-search" id="appraiserSearch" placeholder="æœç´¢é‰´å®šå¸ˆå§“å...">
            </div>
            <div class="member-groups" id="appraiserGroups">
                <!-- é‰´å®šéƒ¨ -->
                <div class="member-group expanded">
                    <div class="member-group-header" onclick="toggleMemberGroup(this)">
                        <span class="group-expand-icon">â–¶</span>
                        <span class="member-group-title">é‰´å®šéƒ¨</span>
                        <span class="member-count">6äºº</span>
                    </div>
                    <div class="member-list">
                        <!-- é‰´å®šä¸€ç»„ -->
                        <div class="member-group">
                            <div class="member-group-header" onclick="toggleMemberGroup(this)">
                                <span class="group-expand-icon">â–¶</span>
                                <span class="member-group-title">é‰´å®šä¸€ç»„</span>
                                <span class="member-count">3äºº</span>
                            </div>
                            <div class="member-list">
                                <div class="member-item" onclick="selectAppraiser(this, 'å´é‰´å¸ˆ')" data-name="å´é‰´å¸ˆ" data-dept="é‰´å®šä¸€ç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">å´</div>
                                    <div class="member-info">
                                        <div class="member-name">å´é‰´å¸ˆ</div>
                                        <div class="member-dept">é‰´å®šä¸€ç»„ Â· é«˜çº§é‰´å®šå¸ˆ</div>
                                    </div>
                                </div>
                                <div class="member-item" onclick="selectAppraiser(this, 'éƒ‘ä¸“å®¶')" data-name="éƒ‘ä¸“å®¶" data-dept="é‰´å®šä¸€ç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">éƒ‘</div>
                                    <div class="member-info">
                                        <div class="member-name">éƒ‘ä¸“å®¶</div>
                                        <div class="member-dept">é‰´å®šä¸€ç»„ Â· èµ„æ·±é‰´å®šå¸ˆ</div>
                                    </div>
                                </div>
                                <div class="member-item" onclick="selectAppraiser(this, 'é’±é‰´å®š')" data-name="é’±é‰´å®š" data-dept="é‰´å®šä¸€ç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">é’±</div>
                                    <div class="member-info">
                                        <div class="member-name">é’±é‰´å®š</div>
                                        <div class="member-dept">é‰´å®šä¸€ç»„ Â· é‰´å®šå¸ˆ</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- é‰´å®šäºŒç»„ -->
                        <div class="member-group">
                            <div class="member-group-header" onclick="toggleMemberGroup(this)">
                                <span class="group-expand-icon">â–¶</span>
                                <span class="member-group-title">é‰´å®šäºŒç»„</span>
                                <span class="member-count">3äºº</span>
                            </div>
                            <div class="member-list">
                                <div class="member-item" onclick="selectAppraiser(this, 'å­™è¯„ä¼°')" data-name="å­™è¯„ä¼°" data-dept="é‰´å®šäºŒç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">å­™</div>
                                    <div class="member-info">
                                        <div class="member-name">å­™è¯„ä¼°</div>
                                        <div class="member-dept">é‰´å®šäºŒç»„ Â· é‰´å®šå¸ˆ</div>
                                    </div>
                                </div>
                                <div class="member-item" onclick="selectAppraiser(this, 'æéªŒè´§')" data-name="æéªŒè´§" data-dept="é‰´å®šäºŒç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">æ</div>
                                    <div class="member-info">
                                        <div class="member-name">æéªŒè´§</div>
                                        <div class="member-dept">é‰´å®šäºŒç»„ Â· åˆçº§é‰´å®šå¸ˆ</div>
                                    </div>
                                </div>
                                <div class="member-item" onclick="selectAppraiser(this, 'å‘¨æƒå¨')" data-name="å‘¨æƒå¨" data-dept="é‰´å®šäºŒç»„">
                                    <div class="member-avatar" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);">å‘¨</div>
                                    <div class="member-info">
                                        <div class="member-name">å‘¨æƒå¨</div>
                                        <div class="member-dept">é‰´å®šäºŒç»„ Â· é«˜çº§é‰´å®šå¸ˆ</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="filter-footer">
                <button class="footer-btn reset-btn" onclick="resetAppraiser()">é‡ç½®</button>
                <button class="footer-btn confirm-btn" onclick="confirmPanel('appraiser')">ç¡®å®š</button>
            </div>
        </div>

        <!-- ç»¼åˆç­›é€‰é¢æ¿ -->
        <div class="filter-panel" id="filterPanel">
            <div class="filter-panel-content">
                <!-- å“ç‰Œ -->
                <div class="filter-group">
                    <div class="filter-group-header">
                        <div>
                            <span class="filter-group-title">å“ç‰Œ</span>
                            <span class="filter-group-selected" id="brandSelected"></span>
                        </div>
                        <div class="filter-group-more" onclick="showAllBrands()">
                            å…¨éƒ¨å“ç‰Œ â€º
                        </div>
                    </div>
                    <div class="filter-options" id="brandOptions">
                        <div class="filter-option" onclick="selectFilterOption(this, 'brand')">çˆ±é©¬ä»•</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'brand')">é¦™å¥ˆå„¿</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'brand')">è·¯æ˜“å¨ç™»</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'brand')">å¤é©°</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'brand')">è¿ªå¥¥</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'brand')">æ™®æ‹‰è¾¾</div>
                    </div>
                </div>

                <!-- æˆè‰² -->
                <div class="filter-group">
                    <div class="filter-group-header">
                        <div class="filter-group-title">æˆè‰²</div>
                    </div>
                    <div class="filter-options">
                        <div class="filter-option" onclick="selectFilterOption(this, 'condition')">å…¨æ–°</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'condition')">99æ–°</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'condition')">95æ–°</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'condition')">9æˆæ–°</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'condition')">8æˆæ–°</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'condition')">7æˆæ–°</div>
                    </div>
                </div>

                <!-- å•†å“çŠ¶æ€ -->
                <div class="filter-group">
                    <div class="filter-group-header">
                        <div class="filter-group-title">å•†å“çŠ¶æ€</div>
                    </div>
                    <div class="filter-options">
                        <div class="filter-option" onclick="selectFilterOption(this, 'status')">åœ¨åº“</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'status')">åœ¨å”®</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'status')">é”å®š</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'status')">å”®å‡º</div>
                    </div>
                </div>

                <!-- ä»“åº“ -->
                <div class="filter-group">
                    <div class="filter-group-header">
                        <div class="filter-group-title">ä»“åº“</div>
                    </div>
                    <div class="filter-options">
                        <div class="filter-option" onclick="selectFilterOption(this, 'warehouse', 'single')">ä¸Šæµ·ä»“</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'warehouse', 'single')">åŒ—äº¬ä»“</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'warehouse', 'single')">å¹¿å·ä»“</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'warehouse', 'single')">æ·±åœ³ä»“</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'warehouse', 'single')">æˆéƒ½ä»“</div>
                    </div>
                </div>

                <!-- åˆ›å»ºæ—¶é—´ -->
                <div class="filter-group">
                    <div class="filter-group-header">
                        <div class="filter-group-title">åˆ›å»ºæ—¶é—´</div>
                    </div>
                    <div class="date-picker">
                        <div class="date-quick-options">
                            <div class="filter-option" onclick="selectQuickDate('today', this)">ä»Šå¤©</div>
                            <div class="filter-option" onclick="selectQuickDate('week', this)">è¿‘7å¤©</div>
                            <div class="filter-option" onclick="selectQuickDate('month', this)">è¿‘30å¤©</div>
                            <div class="filter-option" onclick="selectQuickDate('quarter', this)">è¿‘3ä¸ªæœˆ</div>
                        </div>
                        <div class="date-input-group">
                            <input type="date" class="date-input" id="startDate">
                            <span class="date-separator">-</span>
                            <input type="date" class="date-input" id="endDate">
                        </div>
                    </div>
                </div>

                <!-- çº¿ç´¢æ¥æº -->
                <div class="filter-group">
                    <div class="filter-group-header">
                        <div class="filter-group-title">çº¿ç´¢æ¥æºæ¸ é“</div>
                    </div>
                    <div class="filter-options">
                        <div class="filter-option" onclick="selectFilterOption(this, 'source')">å¤§ä¼—ç‚¹è¯„</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'source')">å°çº¢ä¹¦</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'source')">æŠ–éŸ³å¹¿å‘Š</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'source')">è€å®¢æ¨è</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'source')">å…¬æµ·å”¤é†’</div>
                    </div>
                </div>

                <!-- å›æ”¶æ–¹å¼ -->
                <div class="filter-group">
                    <div class="filter-group-header">
                        <div class="filter-group-title">å›æ”¶æ–¹å¼</div>
                    </div>
                    <div class="filter-options">
                        <div class="filter-option" onclick="selectFilterOption(this, 'recycleMethod', 'single')">ä¸Šé—¨å›æ”¶</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'recycleMethod', 'single')">åˆ°åº—å›æ”¶</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'recycleMethod', 'single')">é‚®å¯„å›æ”¶</div>
                    </div>
                </div>

                <!-- æŒ‚ç­¾çŠ¶æ€ -->
                <div class="filter-group">
                    <div class="filter-group-header">
                        <div class="filter-group-title">æŒ‚ç­¾çŠ¶æ€</div>
                    </div>
                    <div class="filter-options">
                        <div class="filter-option" onclick="selectFilterOption(this, 'tagged', 'single')">å·²æŒ‚ç­¾</div>
                        <div class="filter-option" onclick="selectFilterOption(this, 'tagged', 'single')">æœªæŒ‚ç­¾</div>
                    </div>
                </div>
            </div>
            <div class="filter-footer">
                <button class="footer-btn reset-btn" onclick="resetFilter()">é‡ç½®</button>
                <button class="footer-btn confirm-btn" onclick="confirmPanel('filter')">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <!-- å†…å®¹åŒºåŸŸ - ä¸å—ç­›é€‰é¢æ¿å½±å“ -->
    <div class="content" id="content">
        <div class="result-header">
            <div class="result-count">å…± <strong id="resultCount">156</strong> ä»¶å•†å“</div>
            <button class="sort-btn">
                <span>ç»¼åˆæ’åº</span>
                <span>â–¼</span>
            </button>
        </div>

        <!-- å•†å“åˆ—è¡¨ -->
        <div class="list-item">
            <div class="item-header">
                <div class="item-image">ğŸ‘œ</div>
                <div class="item-main">
                    <div class="item-title">çˆ±é©¬ä»• Birkin 30 é³„é±¼çš®</div>
                    <div class="item-tags">
                        <span class="item-tag brand">çˆ±é©¬ä»•</span>
                        <span class="item-tag status">åœ¨åº“</span>
                        <span class="item-tag">9æˆæ–°</span>
                    </div>
                    <div class="item-info">
                        ç¼–å·: HM2024001 | ä¸Šæµ·ä»“<br>
                        å®¢æœ: å¼ æ™“æ˜ | é‰´å®š: å´é‰´å¸ˆ
                    </div>
                </div>
            </div>
            <div class="item-footer">
                <div class="item-price">Â¥128,000</div>
                <div class="item-time">10-15 14:23</div>
            </div>
        </div>

        <div class="list-item">
            <div class="item-header">
                <div class="item-image">ğŸ‘œ</div>
                <div class="item-main">
                    <div class="item-title">é¦™å¥ˆå„¿ Classic Flap ç¾Šçš®</div>
                    <div class="item-tags">
                        <span class="item-tag brand">é¦™å¥ˆå„¿</span>
                        <span class="item-tag status">åœ¨å”®</span>
                        <span class="item-tag">95æ–°</span>
                    </div>
                    <div class="item-info">
                        ç¼–å·: CH2024089 | åŒ—äº¬ä»“<br>
                        å®¢æœ: ææ€ä½³ | é‰´å®š: éƒ‘ä¸“å®¶
                    </div>
                </div>
            </div>
            <div class="item-footer">
                <div class="item-price">Â¥36,800</div>
                <div class="item-time">10-18 09:15</div>
            </div>
        </div>

        <div class="list-item">
            <div class="item-header">
                <div class="item-image">ğŸ‘œ</div>
                <div class="item-main">
                    <div class="item-title">è·¯æ˜“å¨ç™» Neverfull MM æ£‹ç›˜æ ¼</div>
                    <div class="item-tags">
                        <span class="item-tag brand">è·¯æ˜“å¨ç™»</span>
                        <span class="item-tag status">åœ¨åº“</span>
                        <span class="item-tag">å…¨æ–°</span>
                    </div>
                    <div class="item-info">
                        ç¼–å·: LV2024156 | å¹¿å·ä»“<br>
                        å®¢æœ: åˆ˜å¼º | é‰´å®š: é’±é‰´å®š
                    </div>
                </div>
            </div>
            <div class="item-footer">
                <div class="item-price">Â¥9,200</div>
                <div class="item-time">10-20 16:42</div>
            </div>
        </div>

        <div class="list-item">
            <div class="item-header">
                <div class="item-image">âŒš</div>
                <div class="item-main">
                    <div class="item-title">åŠ³åŠ›å£« æ°´é¬¼ç³»åˆ— 116610LN</div>
                    <div class="item-tags">
                        <span class="item-tag brand">åŠ³åŠ›å£«</span>
                        <span class="item-tag status">åœ¨åº“</span>
                        <span class="item-tag">95æ–°</span>
                    </div>
                    <div class="item-info">
                        ç¼–å·: RLX2024023 | æ·±åœ³ä»“<br>
                        å®¢æœ: èµµæ• | é‰´å®š: å­™è¯„ä¼°
                    </div>
                </div>
            </div>
            <div class="item-footer">
                <div class="item-price">Â¥68,500</div>
                <div class="item-time">10-22 11:30</div>
            </div>
        </div>

        <div class="list-item">
            <div class="item-header">
                <div class="item-image">ğŸ’</div>
                <div class="item-main">
                    <div class="item-title">å¡åœ°äºš LOVEç³»åˆ— æˆ’æŒ‡</div>
                    <div class="item-tags">
                        <span class="item-tag brand">å¡åœ°äºš</span>
                        <span class="item-tag status">åœ¨å”®</span>
                        <span class="item-tag">99æ–°</span>
                    </div>
                    <div class="item-info">
                        ç¼–å·: CAR2024067 | ä¸Šæµ·ä»“<br>
                        å®¢æœ: å­™æ‚¦ | é‰´å®š: æéªŒè´§
                    </div>
                </div>
            </div>
            <div class="item-footer">
                <div class="item-price">Â¥12,800</div>
                <div class="item-time">10-23 15:45</div>
            </div>
        </div>
    </div>

    <!-- å…¨éƒ¨å“ç‰ŒäºŒçº§é¡µ -->
    <div class="sub-page" id="allBrandsPage">
        <div class="sub-page-header">
            <button class="back-btn" onclick="closeAllBrands()">â€¹</button>
            <div class="sub-page-title">é€‰æ‹©å“ç‰Œ</div>
            <button class="sub-page-confirm" onclick="confirmBrandSelection()">ç¡®å®š</button>
        </div>
        <div class="sub-page-body" id="allBrandsBody">
            <!-- A -->
            <div class="letter-group" data-letter="A">
                <div class="letter-header">A</div>
                <div class="letter-brands">
                    <div class="filter-option" onclick="selectBrandFromAll(this)">çˆ±é©¬ä»•</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">çˆ±å½¼</div>
                </div>
            </div>

            <!-- B -->
            <div class="letter-group" data-letter="B">
                <div class="letter-header">B</div>
                <div class="letter-brands">
                    <div class="filter-option" onclick="selectBrandFromAll(this)">å®æ ¼ä¸½</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">å®ç€</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">å®ç‘</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">å·´é»ä¸–å®¶</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">ç™¾è¾¾ç¿¡ä¸½</div>
                </div>
            </div>

            <!-- C -->
            <div class="letter-group" data-letter="C">
                <div class="letter-header">C</div>
                <div class="letter-brands">
                    <div class="filter-option" onclick="selectBrandFromAll(this)">Celine</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">Chloe</div>
                </div>
            </div>

            <!-- D -->
            <div class="letter-group" data-letter="D">
                <div class="letter-header">D</div>
                <div class="letter-brands">
                    <div class="filter-option" onclick="selectBrandFromAll(this)">è¿ªå¥¥</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">æœå˜‰ç­çº³</div>
                </div>
            </div>

            <!-- G -->
            <div class="letter-group" data-letter="G">
                <div class="letter-header">G</div>
                <div class="letter-brands">
                    <div class="filter-option" onclick="selectBrandFromAll(this)">å¤é©°</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">Givenchy</div>
                </div>
            </div>

            <!-- K -->
            <div class="letter-group" data-letter="K">
                <div class="letter-header">K</div>
                <div class="letter-brands">
                    <div class="filter-option" onclick="selectBrandFromAll(this)">å¡åœ°äºš</div>
                </div>
            </div>

            <!-- L -->
            <div class="letter-group" data-letter="L">
                <div class="letter-header">L</div>
                <div class="letter-brands">
                    <div class="filter-option" onclick="selectBrandFromAll(this)">è·¯æ˜“å¨ç™»</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">åŠ³åŠ›å£«</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">æµªç´</div>
                    <div class="filter-option" onclick="selectBrandFromAll(this)">Loewe</div>
                </div>
            </div>

            <!-- P -->
            <div class="letter-group" data-letter="P">
                <div class="letter-header">P</div>
                <div class="letter-brands">
                    <div class="filter-option" onclick="selectBrandFromAll(this)">æ™®æ‹‰è¾¾</div>
                </div>
            </div>

            <!-- X -->
            <div class="letter-group" data-letter="X">
                <div class="letter-header">X</div>
                <div class="letter-brands">
                    <div class="filter-option" onclick="selectBrandFromAll(this)">é¦™å¥ˆå„¿</div>
                </div>
            </div>
        </div>

        <!-- å­—æ¯ç´¢å¼• -->
        <div class="alphabet-index">
            <div class="alphabet-item" onclick="scrollToLetter('A')">A</div>
            <div class="alphabet-item" onclick="scrollToLetter('B')">B</div>
            <div class="alphabet-item" onclick="scrollToLetter('C')">C</div>
            <div class="alphabet-item" onclick="scrollToLetter('D')">D</div>
            <div class="alphabet-item" onclick="scrollToLetter('G')">G</div>
            <div class="alphabet-item" onclick="scrollToLetter('K')">K</div>
            <div class="alphabet-item" onclick="scrollToLetter('L')">L</div>
            <div class="alphabet-item" onclick="scrollToLetter('P')">P</div>
            <div class="alphabet-item" onclick="scrollToLetter('X')">X</div>
        </div>
    </div>

    <script>
        // å…¨å±€çŠ¶æ€
        let currentPanel = null;
        let selectedData = {
            category: null,
            staff: [],
            appraiser: null,
            brand: [],
            condition: [],
            status: [],
            warehouse: null,
            createTime: null,
            source: [],
            recycleMethod: null,
            tagged: null
        };

        // åˆ‡æ¢é¢æ¿
        function togglePanel(panelType) {
            const panels = {
                'category': document.getElementById('categoryPanel'),
                'staff': document.getElementById('staffPanel'),
                'appraiser': document.getElementById('appraiserPanel'),
                'filter': document.getElementById('filterPanel')
            };

            const tabs = {
                'category': document.getElementById('categoryTab'),
                'staff': document.getElementById('staffTab'),
                'appraiser': document.getElementById('appraiserTab'),
                'filter': document.getElementById('filterTab')
            };

            const overlay = document.getElementById('panelOverlay');

            // å¦‚æœç‚¹å‡»çš„æ˜¯å½“å‰é¢æ¿,åˆ™å…³é—­
            if (currentPanel === panelType) {
                closeAllPanels();
                return;
            }

            // å…³é—­æ‰€æœ‰é¢æ¿
            Object.values(panels).forEach(p => p.classList.remove('show'));
            Object.values(tabs).forEach(t => t.classList.remove('active'));

            // æ‰“å¼€é€‰ä¸­çš„é¢æ¿
            panels[panelType].classList.add('show');
            tabs[panelType].classList.add('active');
            overlay.classList.add('show');
            currentPanel = panelType;
        }

        // å…³é—­æ‰€æœ‰é¢æ¿
        function closeAllPanels() {
            const panels = document.querySelectorAll('.category-panel, .member-panel, .filter-panel');
            const tabs = document.querySelectorAll('.filter-tab');
            const overlay = document.getElementById('panelOverlay');

            panels.forEach(p => p.classList.remove('show'));
            tabs.forEach(t => t.classList.remove('active'));
            overlay.classList.remove('show');
            currentPanel = null;
        }

        // é€‰æ‹©å“ç±»
        function selectCategory(element, name) {
            const items = document.querySelectorAll('.category-item');
            items.forEach(item => item.classList.remove('active'));
            element.classList.add('active');
            selectedData.category = name;
            
            // å“ç±»é€‰æ‹©åç«‹å³ç¡®è®¤
            setTimeout(() => {
                confirmPanel('category');
            }, 200);
        }

        // é€‰æ‹©å®¢æœ (å¤šé€‰)
        function selectStaff(element, name) {
            element.classList.toggle('active');
            
            const index = selectedData.staff.indexOf(name);
            if (index > -1) {
                selectedData.staff.splice(index, 1);
            } else {
                selectedData.staff.push(name);
            }
            
            updateSelectedStaff();
        }

        // æ›´æ–°å·²é€‰å®¢æœæ˜¾ç¤º
        function updateSelectedStaff() {
            const container = document.getElementById('selectedStaff');
            const list = document.getElementById('selectedStaffList');
            
            if (selectedData.staff.length === 0) {
                container.classList.remove('show');
                return;
            }
            
            container.classList.add('show');
            list.innerHTML = '';
            
            selectedData.staff.forEach(name => {
                const tag = document.createElement('div');
                tag.className = 'selected-member-tag';
                tag.innerHTML = `${name} <span class="selected-member-remove" onclick="removeStaff('${name}')">âœ•</span>`;
                list.appendChild(tag);
            });
        }

        // ç§»é™¤å·²é€‰å®¢æœ
        function removeStaff(name) {
            const index = selectedData.staff.indexOf(name);
            if (index > -1) {
                selectedData.staff.splice(index, 1);
            }
            
            // å–æ¶ˆå¯¹åº”é¡¹çš„é€‰ä¸­çŠ¶æ€
            const items = document.querySelectorAll('#staffPanel .member-item');
            items.forEach(item => {
                if (item.getAttribute('data-name') === name) {
                    item.classList.remove('active');
                }
            });
            
            updateSelectedStaff();
        }

        // é‡ç½®å®¢æœé€‰æ‹©
        function resetStaff() {
            selectedData.staff = [];
            document.querySelectorAll('#staffPanel .member-item').forEach(item => {
                item.classList.remove('active');
            });
            updateSelectedStaff();
        }

        // é€‰æ‹©é‰´å®šå¸ˆ (å•é€‰)
        function selectAppraiser(element, name) {
            const items = document.querySelectorAll('#appraiserPanel .member-item');
            items.forEach(item => item.classList.remove('active'));
            element.classList.add('active');
            selectedData.appraiser = name;
        }

        // é‡ç½®é‰´å®šå¸ˆé€‰æ‹©
        function resetAppraiser() {
            selectedData.appraiser = null;
            document.querySelectorAll('#appraiserPanel .member-item').forEach(item => {
                item.classList.remove('active');
            });
        }

        // å±•å¼€/æŠ˜å æˆå‘˜åˆ†ç»„
        function toggleMemberGroup(header) {
            const group = header.parentElement;
            group.classList.toggle('expanded');
        }

        // é€‰æ‹©ç­›é€‰é¡¹
        function selectFilterOption(element, type, mode = 'multiple') {
            if (mode === 'single') {
                const siblings = element.parentElement.querySelectorAll('.filter-option');
                siblings.forEach(s => s.classList.remove('active'));
            }
            element.classList.toggle('active');
            
            // æ›´æ–°å“ç‰Œå·²é€‰æ˜¾ç¤º
            if (type === 'brand') {
                updateBrandSelected();
            }
        }

        // æ›´æ–°å“ç‰Œå·²é€‰æ˜¾ç¤º
        function updateBrandSelected() {
            const selected = document.querySelectorAll('#brandOptions .filter-option.active');
            const display = document.getElementById('brandSelected');
            
            if (selected.length === 0) {
                display.textContent = '';
            } else if (selected.length <= 2) {
                const names = Array.from(selected).map(el => el.textContent.trim());
                display.textContent = `å·²é€‰: ${names.join('ã€')}`;
            } else {
                display.textContent = `å·²é€‰${selected.length}ä¸ª`;
            }
        }

        // å¿«é€Ÿæ—¥æœŸé€‰æ‹©
        function selectQuickDate(type, element) {
            const today = new Date();
            const endDate = document.getElementById('endDate');
            const startDate = document.getElementById('startDate');
            
            endDate.value = today.toISOString().split('T')[0];
            
            let start = new Date();
            switch(type) {
                case 'today':
                    start = today;
                    break;
                case 'week':
                    start.setDate(today.getDate() - 7);
                    break;
                case 'month':
                    start.setDate(today.getDate() - 30);
                    break;
                case 'quarter':
                    start.setMonth(today.getMonth() - 3);
                    break;
            }
            
            startDate.value = start.toISOString().split('T')[0];
            
            const section = element.closest('.filter-group');
            const buttons = section.querySelectorAll('.filter-option');
            buttons.forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
        }

        // é‡ç½®ç­›é€‰
        function resetFilter() {
            document.querySelectorAll('#filterPanel .filter-option').forEach(item => {
                item.classList.remove('active');
            });
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
            updateBrandSelected();
        }

        // ç¡®è®¤é¢æ¿
        function confirmPanel(panelType) {
            updateBadges();
            closeAllPanels();
            updateResultCount();
        }

        // æ›´æ–°å¾½ç« 
        function updateBadges() {
            // å“ç±»
            const categoryBadge = document.getElementById('categoryBadge');
            if (selectedData.category) {
                categoryBadge.textContent = '1';
                categoryBadge.classList.add('show');
            } else {
                categoryBadge.classList.remove('show');
            }

            // å®¢æœ
            const staffBadge = document.getElementById('staffBadge');
            if (selectedData.staff.length > 0) {
                staffBadge.textContent = selectedData.staff.length;
                staffBadge.classList.add('show');
            } else {
                staffBadge.classList.remove('show');
            }

            // é‰´å®šå¸ˆ
            const appraiserBadge = document.getElementById('appraiserBadge');
            if (selectedData.appraiser) {
                appraiserBadge.textContent = '1';
                appraiserBadge.classList.add('show');
            } else {
                appraiserBadge.classList.remove('show');
            }

            // ç»¼åˆç­›é€‰
            let filterCount = 0;
            const activeFilters = document.querySelectorAll('#filterPanel .filter-option.active');
            filterCount = activeFilters.length;
            
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            if (startDate && endDate) filterCount++;

            const filterBadge = document.getElementById('filterBadge');
            filterBadge.textContent = filterCount;
        }

        // æ›´æ–°ç»“æœæ•°
        function updateResultCount() {
            let totalFilters = 0;
            if (selectedData.category) totalFilters++;
            totalFilters += selectedData.staff.length;
            if (selectedData.appraiser) totalFilters++;
            
            const activeFilters = document.querySelectorAll('#filterPanel .filter-option.active');
            totalFilters += activeFilters.length;
            
            const count = Math.max(1, 156 - totalFilters * 12);
            document.getElementById('resultCount').textContent = count;
        }

        // æ˜¾ç¤ºå…¨éƒ¨å“ç‰Œ
        function showAllBrands() {
            document.getElementById('allBrandsPage').classList.add('show');
        }

        // å…³é—­å…¨éƒ¨å“ç‰Œ
        function closeAllBrands() {
            document.getElementById('allBrandsPage').classList.remove('show');
        }

        // ä»å…¨éƒ¨å“ç‰Œé€‰æ‹©
        function selectBrandFromAll(element) {
            element.classList.toggle('active');
        }

        // ç¡®è®¤å“ç‰Œé€‰æ‹©
        function confirmBrandSelection() {
            const selected = document.querySelectorAll('#allBrandsBody .filter-option.active');
            
            // åŒæ­¥åˆ°ä¸»ç­›é€‰
            const brandOptions = document.querySelectorAll('#brandOptions .filter-option');
            brandOptions.forEach(opt => opt.classList.remove('active'));
            
            selected.forEach(item => {
                const brandName = item.textContent.trim();
                brandOptions.forEach(opt => {
                    if (opt.textContent.includes(brandName)) {
                        opt.classList.add('active');
                    }
                });
            });

            updateBrandSelected();
            closeAllBrands();
        }

        // æ»šåŠ¨åˆ°æŒ‡å®šå­—æ¯
        function scrollToLetter(letter) {
            const group = document.querySelector(`[data-letter="${letter}"]`);
            if (group) {
                const body = document.getElementById('allBrandsBody');
                body.scrollTo({ top: group.offsetTop - 60, behavior: 'smooth' });
            }
        }

        // æœç´¢åŠŸèƒ½
        function clearSearch() {
            document.getElementById('searchInput').value = '';
        }

        // æˆå‘˜æœç´¢
        function setupMemberSearch(searchId, panelId) {
            const searchInput = document.getElementById(searchId);
            if (!searchInput) return;

            searchInput.addEventListener('input', function(e) {
                const keyword = e.target.value.toLowerCase().trim();
                const panel = document.getElementById(panelId);
                const groups = panel.querySelectorAll('.member-group');

                if (!keyword) {
                    groups.forEach(group => {
                        group.style.display = '';
                        const members = group.querySelectorAll('.member-item');
                        members.forEach(m => {
                            m.style.display = '';
                            const nameEl = m.querySelector('.member-name');
                            if (nameEl) nameEl.innerHTML = nameEl.textContent;
                        });
                    });
                    return;
                }

                groups.forEach(group => {
                    const members = group.querySelectorAll('.member-item');
                    let hasVisible = false;

                    members.forEach(member => {
                        const name = member.getAttribute('data-name');
                        if (!name) return;
                        
                        const nameLower = name.toLowerCase();
                        const nameEl = member.querySelector('.member-name');

                        if (nameLower.includes(keyword)) {
                            member.style.display = '';
                            hasVisible = true;
                            const regex = new RegExp(`(${keyword})`, 'gi');
                            nameEl.innerHTML = name.replace(regex, '<span class="highlight">$1</span>');
                        } else {
                            member.style.display = 'none';
                            nameEl.innerHTML = nameEl.textContent;
                        }
                    });

                    group.style.display = hasVisible ? '' : 'none';
                    if (hasVisible) group.classList.add('expanded');
                });
            });

            // å¤„ç†é”®ç›˜å¼¹èµ·
            searchInput.addEventListener('focus', function() {
                document.body.classList.add('keyboard-open');
            });

            searchInput.addEventListener('blur', function() {
                document.body.classList.remove('keyboard-open');
            });
        }

        // åˆå§‹åŒ–æœç´¢
        setupMemberSearch('staffSearch', 'staffGroups');
        setupMemberSearch('appraiserSearch', 'appraiserGroups');

        // æ£€æµ‹é”®ç›˜é«˜åº¦ (ä»…iOS)
        if (/iPhone|iPad|iPod/.test(navigator.userAgent)) {
            window.visualViewport?.addEventListener('resize', () => {
                const keyboardHeight = window.innerHeight - window.visualViewport.height;
                document.documentElement.style.setProperty('--keyboard-height', `${keyboardHeight}px`);
            });
        }
    </script>
</body>
</html>
