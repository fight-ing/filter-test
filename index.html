<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç­›é€‰æ’åºç³»ç»Ÿ - å®Œæ•´ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f5f5f5;
            overflow-x: hidden;
        }

        /* é¡¶éƒ¨æœç´¢åŒºåŸŸ */
        .header {
            background: #fff;
            padding: 12px 16px;
            border-bottom: 1px solid #e5e5e5;
        }

        .search-box {
            position: relative;
            background: #f5f5f5;
            border-radius: 8px;
            padding: 10px 12px;
            display: flex;
            align-items: center;
        }

        .search-icon {
            color: #999;
            margin-right: 8px;
            font-size: 16px;
        }

        .search-input {
            border: none;
            background: none;
            flex: 1;
            font-size: 15px;
            outline: none;
        }

        .search-input::placeholder {
            color: #999;
        }

        /* æ’åºç­›é€‰æ  */
        .filter-bar {
            background: #fff;
            display: flex;
            border-bottom: 1px solid #e5e5e5;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .filter-item {
            flex: 1;
            padding: 14px 0;
            text-align: center;
            font-size: 14px;
            color: #333;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            cursor: pointer;
            user-select: none;
        }

        .filter-item.active {
            color: #007AFF;
        }

        .filter-item .arrow {
            font-size: 10px;
            transition: transform 0.3s;
        }

        .filter-item.active .arrow {
            transform: rotate(180deg);
        }

        .filter-item .badge {
            position: absolute;
            top: 8px;
            right: 20%;
            background: #FF3B30;
            color: #fff;
            font-size: 10px;
            min-width: 16px;
            height: 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
        }

        /* æ’åºä¸‹æ‹‰å®¹å™¨ */
        .sort-dropdown-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: none;
            z-index: 101;
        }

        .sort-dropdown-wrapper.show {
            display: block;
        }

        .sort-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
        }

        /* æ’åºä¸‹æ‹‰èœå• */
        .sort-dropdown {
            position: absolute;
            top: 49px;
            left: 0;
            right: 0;
            background: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-height: 400px;
            overflow-y: auto;
            z-index: 102;
        }

        .sort-option {
            padding: 14px 16px;
            font-size: 14px;
            color: #333;
            border-bottom: 1px solid #f5f5f5;
            cursor: pointer;
        }

        .sort-option:last-child {
            border-bottom: none;
        }

        .sort-option.active {
            color: #007AFF;
            background: #f0f7ff;
        }

        /* è’™å±‚ */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 998;
        }

        .overlay.show {
            display: block;
        }

        /* ç­›é€‰é¢æ¿ */
        .filter-panel {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            max-height: 75vh;
            background: #fff;
            transform: translateY(100%);
            transition: transform 0.3s;
            z-index: 999;
            display: flex;
            flex-direction: column;
        }

        .filter-panel.show {
            transform: translateY(0);
        }

        .filter-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        /* å·¦ä¾§å¯¼èˆª */
        .filter-nav {
            width: 100px;
            background: #f5f5f5;
            overflow-y: auto;
        }

        .nav-item {
            padding: 16px 12px;
            font-size: 13px;
            color: #333;
            text-align: center;
            position: relative;
            cursor: pointer;
            border-left: 3px solid transparent;
        }

        .nav-item.active {
            background: #fff;
            color: #007AFF;
            border-left-color: #007AFF;
        }

        .nav-item .dot {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 6px;
            height: 6px;
            background: #FF3B30;
            border-radius: 50%;
            display: none;
        }

        .nav-item .dot.show {
            display: block;
        }

        /* å³ä¾§é€‰é¡¹åŒº */
        .filter-options {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .filter-section {
            margin-bottom: 30px;
        }

        .filter-section:last-child {
            margin-bottom: 0;
        }

        .option-title {
            font-size: 14px;
            color: #333;
            font-weight: 500;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e5e5e5;
        }

        .option-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tag {
            padding: 8px 16px;
            background: #f5f5f5;
            border: 1px solid #e5e5e5;
            border-radius: 4px;
            font-size: 13px;
            color: #333;
            cursor: pointer;
            user-select: none;
        }

        .tag.active {
            background: #e8f4ff;
            border-color: #007AFF;
            color: #007AFF;
        }

        .tag.disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* æ—¶é—´é€‰æ‹©å™¨ */
        .time-range {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .time-input {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid #e5e5e5;
            border-radius: 4px;
            font-size: 13px;
            outline: none;
        }

        .time-input:focus {
            border-color: #007AFF;
        }

        /* å“ç‰Œç‰¹æ®Šæ ·å¼ */
        .brand-all-link {
            display: inline-block;
            padding: 6px 12px;
            color: #007AFF;
            font-size: 12px;
            border: 1px solid #007AFF;
            border-radius: 4px;
            cursor: pointer;
        }

        .brand-selected-inline {
            display: inline-flex;
            flex-wrap: wrap;
            gap: 6px;
            align-items: center;
            font-size: 12px;
            color: #007AFF;
            max-width: 60%;
            overflow: hidden;
        }

        .brand-selected-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* æˆå‘˜é€‰ä¸­æ ‡ç­¾ */
        .selected-tag {
            padding: 6px 12px;
            background: #e8f4ff;
            border: 1px solid #007AFF;
            color: #007AFF;
            border-radius: 4px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .selected-tag .close {
            cursor: pointer;
            font-size: 14px;
        }

        /* å“ç‰Œå·²é€‰åŒºåŸŸ */
        .brand-selected {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }

        /* æˆå‘˜é€‰æ‹©å ä½ */
        .member-placeholder {
            padding: 12px;
            background: #f5f5f5;
            border: 1px dashed #ccc;
            border-radius: 4px;
            text-align: center;
            color: #999;
            font-size: 13px;
            cursor: pointer;
        }

        .member-selected {
            padding: 10px 12px;
            background: #e8f4ff;
            border: 1px solid #007AFF;
            border-radius: 4px;
            color: #007AFF;
            font-size: 13px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .member-selected .change-btn {
            color: #007AFF;
            font-size: 12px;
        }

        /* åº•éƒ¨æŒ‰é’® */
        .filter-footer {
            display: flex;
            padding: 12px 16px;
            border-top: 1px solid #e5e5e5;
            background: #fff;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 4px;
            font-size: 15px;
            cursor: pointer;
            outline: none;
        }

        .btn-reset {
            background: #f5f5f5;
            color: #333;
            margin-right: 12px;
        }

        .btn-confirm {
            background: #007AFF;
            color: #fff;
        }

        /* å•†å“åˆ—è¡¨ç¤ºä¾‹ */
        .product-list {
            padding: 12px 16px;
        }

        .product-item {
            background: #fff;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .product-title {
            color: #333;
            font-weight: 500;
        }

        .product-status {
            color: #999;
        }

        .product-info {
            font-size: 12px;
            color: #666;
            line-height: 1.8;
        }

        /* äºŒçº§é¡µé¢ */
        .secondary-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #fff;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
        }

        .secondary-page.show {
            transform: translateX(0);
        }

        .secondary-header {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-bottom: 1px solid #e5e5e5;
        }

        .back-btn {
            font-size: 18px;
            color: #007AFF;
            cursor: pointer;
            margin-right: 12px;
        }

        .secondary-title {
            font-size: 16px;
            font-weight: 500;
            color: #333;
        }

        .secondary-content {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        /* å“ç‰Œå­—æ¯åˆ†ç»„ */
        .brand-group {
            margin-bottom: 20px;
        }

        .brand-letter {
            font-size: 14px;
            color: #666;
            font-weight: 500;
            margin-bottom: 10px;
            padding-left: 4px;
        }

        /* æˆå‘˜æœç´¢ */
        .member-search {
            margin-bottom: 16px;
        }

        .member-search input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e5e5e5;
            border-radius: 4px;
            font-size: 13px;
            outline: none;
        }

        .member-search input:focus {
            border-color: #007AFF;
        }

        /* æˆå‘˜åˆ†ç»„ */
        .member-group {
            margin-bottom: 20px;
        }

        .group-header {
            display: flex;
            align-items: center;
            padding: 10px 0;
            font-size: 14px;
            color: #333;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 1px solid #e5e5e5;
            margin-bottom: 10px;
        }

        .group-header .arrow {
            font-size: 10px;
            margin-right: 8px;
            transition: transform 0.3s;
        }

        .group-header.collapsed .arrow {
            transform: rotate(-90deg);
        }

        .group-members {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .group-members.collapsed {
            display: none;
        }

        /* é€šæ åˆ—è¡¨æ ·å¼(ç”¨äºäºŒçº§é¡µé¢) */
        .list-item {
            padding: 14px 16px;
            background: #fff;
            border-bottom: 1px solid #f5f5f5;
            font-size: 14px;
            color: #333;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }

        .list-item:active {
            background: #f5f5f5;
        }

        .list-item.active {
            color: #007AFF;
            background: #f0f7ff;
        }

        .list-item .check-icon {
            color: #007AFF;
            font-size: 18px;
            display: none;
        }

        .list-item.active .check-icon {
            display: block;
        }

        /* äºŒçº§é¡µé¢åˆ†ç»„å®¹å™¨ */
        .list-group {
            margin-bottom: 0;
        }

        .list-group-header {
            padding: 12px 16px;
            background: #f5f5f5;
            font-size: 13px;
            color: #666;
            font-weight: 500;
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .list-group-header .arrow {
            font-size: 10px;
            margin-right: 8px;
            transition: transform 0.3s;
        }

        .list-group-header.collapsed .arrow {
            transform: rotate(-90deg);
        }

        .list-group-items {
            background: #fff;
        }

        .list-group-items.collapsed {
            display: none;
        }

        /* æœç´¢ç»“æœå®¹å™¨ */
        .search-result-container {
            background: #fff;
        }

        .search-result-empty {
            padding: 40px 16px;
            text-align: center;
            color: #999;
            font-size: 14px;
        }

        /* å“ç‰Œå·²é€‰æ ‡ç­¾(é¡¶éƒ¨) */
        .brand-selected-tag {
            padding: 6px 12px;
            background: #e8f4ff;
            border: 1px solid #007AFF;
            color: #007AFF;
            border-radius: 4px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
        }

        .brand-selected-tag .close {
            font-size: 14px;
        }

        /* å“åº”å¼ä¼˜åŒ– */
        @media (max-height: 600px) {
            .filter-panel {
                max-height: 85vh;
            }
        }

        /* éšè—æ»šåŠ¨æ¡ä½†ä¿æŒæ»šåŠ¨åŠŸèƒ½ */
        .filter-options::-webkit-scrollbar,
        .filter-nav::-webkit-scrollbar {
            width: 0;
            height: 0;
        }

        /* æŠ–åŠ¨åŠ¨ç”» */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨æœç´¢ -->
    <div class="header">
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text" class="search-input" placeholder="æœç´¢å•†å“åç§°ã€è®¢å•å·ã€å®¢æˆ·å§“å">
        </div>
    </div>

    <!-- æ’åºç­›é€‰æ  -->
    <div class="filter-bar">
        <div class="filter-item" id="sortBtn">
            <span id="sortLabel">æœ€æ–°åˆ›å»º</span>
            <span class="arrow">â–¼</span>
        </div>
        <div class="filter-item" onclick="openFilter()">
            <span>ç­›é€‰</span>
            <span class="badge" id="filterBadge" style="display: none;">0</span>
        </div>
    </div>

    <!-- æ’åºä¸‹æ‹‰å®¹å™¨ -->
    <div class="sort-dropdown-wrapper" id="sortDropdownWrapper">
        <div class="sort-overlay" onclick="closeSortDropdown()"></div>
        <div class="sort-dropdown" id="sortDropdown">
            <div class="sort-option active" data-sort="create-desc">æœ€æ–°åˆ›å»º</div>
            <div class="sort-option" data-sort="create-asc">æœ€æ—©åˆ›å»º</div>
            <div class="sort-option" data-sort="complete-desc">æœ€æ–°å®Œæˆ</div>
            <div class="sort-option" data-sort="complete-asc">æœ€æ—©å®Œæˆ</div>
            <div class="sort-option" data-sort="update-desc">æœ€æ–°æ›´æ–°</div>
            <div class="sort-option" data-sort="update-asc">æœ€æ—©æ›´æ–°</div>
            <div class="sort-option" data-sort="recycle-price-asc">å›æ”¶ä»·å‡åº</div>
            <div class="sort-option" data-sort="recycle-price-desc">å›æ”¶ä»·é™åº</div>
            <div class="sort-option" data-sort="sale-price-asc">é”€å”®ä»·å‡åº</div>
            <div class="sort-option" data-sort="sale-price-desc">é”€å”®ä»·é™åº</div>
        </div>
    </div>

    <!-- å•†å“åˆ—è¡¨ç¤ºä¾‹ -->
    <div class="product-list">
        <div class="product-item">
            <div class="product-header">
                <span class="product-title">HermÃ¨s Birkin 30cm é»‘é‡‘é…è‰²</span>
                <span class="product-status">åœ¨åº“</span>
            </div>
            <div class="product-info">
                æˆè‰²: 95æ–° | å“ç±»: æ‰‹è¢‹ | ä»“åº“: æ€»éƒ¨ä»“<br>
                åˆ›å»ºæ—¶é—´: 2025-11-06 14:30 | å›æ”¶ä»·: Â¥128,000
            </div>
        </div>
        <div class="product-item">
            <div class="product-header">
                <span class="product-title">Chanel Classic Flap 25cm</span>
                <span class="product-status">åœ¨å”®</span>
            </div>
            <div class="product-info">
                æˆè‰²: 90æ–° | å“ç±»: å•è‚©åŒ… | ä»“åº“: åä¸œä»“<br>
                åˆ›å»ºæ—¶é—´: 2025-11-05 10:15 | é”€å”®ä»·: Â¥45,800
            </div>
        </div>
        <div class="product-item">
            <div class="product-header">
                <span class="product-title">Rolex Submariner 116610LN</span>
                <span class="product-status">åœ¨åº“</span>
            </div>
            <div class="product-info">
                æˆè‰²: 99æ–° | å“ç±»: è…•è¡¨ | ä»“åº“: æ€»éƒ¨ä»“<br>
                åˆ›å»ºæ—¶é—´: 2025-11-04 16:45 | å›æ”¶ä»·: Â¥68,000
            </div>
        </div>
    </div>

    <!-- è’™å±‚ -->
    <div class="overlay" id="overlay" onclick="closeFilter()"></div>

    <!-- ç­›é€‰é¢æ¿ -->
    <div class="filter-panel" id="filterPanel">
        <div class="filter-content">
            <!-- å·¦ä¾§å¯¼èˆª -->
            <div class="filter-nav" id="filterNav">
                <div class="nav-item active" data-section="brand">
                    å“ç‰Œ
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="category">
                    å“ç±»
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="condition">
                    æˆè‰²
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="status">
                    å•†å“çŠ¶æ€
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="warehouse">
                    ä»“åº“
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="createTime">
                    åˆ›å»ºæ—¶é—´
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="bookTime">
                    é¢„çº¦æ—¶é—´
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="firstFollow">
                    é¦–æ¬¡è·Ÿè¿›
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="followInterval">
                    è·Ÿè¿›é—´éš”
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="sourceChannel">
                    çº¿ç´¢æ¥æº
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="createChannel">
                    åˆ›å»ºæ¸ é“
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="leadType">
                    çº¿ç´¢ç±»å‹
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="productCount">
                    å’¨è¯¢å•†å“æ•°
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="priority">
                    ä»»åŠ¡ä¼˜å…ˆçº§
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="staff">
                    è·Ÿè¿›å®¢æœ
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="recycleMethod">
                    å›æ”¶æ–¹å¼
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="authenticator">
                    é‰´å®šå¸ˆ
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="authMethod">
                    é‰´å®šæ–¹å¼
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="quoter">
                    æŠ¥ä»·å¸ˆ
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="quoteMethod">
                    æŠ¥ä»·æ–¹å¼
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="inboundTime">
                    å…¥åº“æ—¶é—´
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="outboundTime">
                    å‡ºåº“æ—¶é—´
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="accuracy">
                    ç›˜ç‚¹å‡†ç¡®ç‡
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="tag">
                    æŒ‚ç­¾
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="userLevel">
                    ç”¨æˆ·çº§åˆ«
                    <span class="dot"></span>
                </div>
                <div class="nav-item" data-section="recycleCount">
                    å›æ”¶å•†å“æ•°
                    <span class="dot"></span>
                </div>
            </div>

            <!-- å³ä¾§é€‰é¡¹ -->
            <div class="filter-options" id="filterOptions">
                <!-- å“ç‰Œç­›é€‰ -->
                <div class="filter-section" data-section="brand" id="section-brand">
                    <div class="option-title" style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 8px; flex: 1; overflow: hidden;">
                            <span style="white-space: nowrap;">å“ç‰Œ</span>
                            <span class="brand-selected-inline" id="brandSelectedInline"></span>
                        </div>
                        <span class="brand-all-link" onclick="openBrandAll()">å…¨éƒ¨å“ç‰Œ ></span>
                    </div>
                    <div class="option-tags" id="brandRecommendTags">
                        <div class="tag" data-value="hermes">HermÃ¨s</div>
                        <div class="tag" data-value="chanel">Chanel</div>
                        <div class="tag" data-value="lv">Louis Vuitton</div>
                        <div class="tag" data-value="dior">Dior</div>
                        <div class="tag" data-value="gucci">Gucci</div>
                        <div class="tag" data-value="prada">Prada</div>
                    </div>
                </div>

                <!-- å“ç±»ç­›é€‰ -->
                <div class="filter-section" data-section="category" id="section-category">
                    <div class="option-title">å“ç±»</div>
                    <div class="option-tags">
                        <div class="tag" data-value="handbag">æ‰‹è¢‹</div>
                        <div class="tag" data-value="shoulder">å•è‚©åŒ…</div>
                        <div class="tag" data-value="crossbody">æ–œæŒåŒ…</div>
                        <div class="tag" data-value="wallet">é’±åŒ…</div>
                        <div class="tag" data-value="watch">è…•è¡¨</div>
                        <div class="tag" data-value="jewelry">ç å®</div>
                        <div class="tag" data-value="accessories">é…é¥°</div>
                        <div class="tag" data-value="shoes">é‹å±¥</div>
                        <div class="tag" data-value="clothing">æœé¥°</div>
                    </div>
                </div>

                <!-- æˆè‰²ç­›é€‰ -->
                <div class="filter-section" data-section="condition" id="section-condition">
                    <div class="option-title">æˆè‰²</div>
                    <div class="option-tags">
                        <div class="tag" data-value="99">99æ–°</div>
                        <div class="tag" data-value="95">95æ–°</div>
                        <div class="tag" data-value="90">90æ–°</div>
                        <div class="tag" data-value="85">85æ–°</div>
                        <div class="tag" data-value="80">80æ–°</div>
                        <div class="tag" data-value="70">70æ–°ä»¥ä¸‹</div>
                    </div>
                </div>

                <!-- å•†å“çŠ¶æ€ -->
                <div class="filter-section" data-section="status" id="section-status">
                    <div class="option-title">å•†å“çŠ¶æ€</div>
                    <div class="option-tags">
                        <div class="tag" data-value="in-stock">åœ¨åº“</div>
                        <div class="tag" data-value="on-sale">åœ¨å”®</div>
                        <div class="tag" data-value="locked">é”å®š</div>
                        <div class="tag" data-value="sold">å”®å‡º</div>
                    </div>
                </div>

                <!-- ä»“åº“ -->
                <div class="filter-section" data-section="warehouse" id="section-warehouse">
                    <div class="option-title" style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 8px; flex: 1; overflow: hidden;">
                            <span style="white-space: nowrap;">ä»“åº“</span>
                            <span class="brand-selected-inline" id="warehouseSelectedInline"></span>
                        </div>
                        <span class="brand-all-link" onclick="openWarehouseSelect()">é€‰æ‹© ></span>
                    </div>
                </div>

                <!-- åˆ›å»ºæ—¶é—´ -->
                <div class="filter-section" data-section="createTime" id="section-createTime">
                    <div class="option-title">åˆ›å»ºæ—¶é—´</div>
                    <div class="time-range">
                        <input type="date" class="time-input" id="createTimeStart" placeholder="å¼€å§‹æ—¥æœŸ">
                        <span>è‡³</span>
                        <input type="date" class="time-input" id="createTimeEnd" placeholder="ç»“æŸæ—¥æœŸ">
                    </div>
                    <div class="option-tags" id="createTimeQuickTags">
                        <div class="tag" data-value="today">ä»Šå¤©</div>
                        <div class="tag" data-value="week">è¿‘7å¤©</div>
                        <div class="tag" data-value="month">è¿‘30å¤©</div>
                        <div class="tag" data-value="3month">è¿‘3ä¸ªæœˆ</div>
                    </div>
                </div>

                <!-- é¢„çº¦æ—¶é—´ -->
                <div class="filter-section" data-section="bookTime" id="section-bookTime">
                    <div class="option-title">é¢„çº¦æ—¶é—´</div>
                    <div class="time-range">
                        <input type="date" class="time-input" id="bookTimeStart" placeholder="å¼€å§‹æ—¥æœŸ">
                        <span>è‡³</span>
                        <input type="date" class="time-input" id="bookTimeEnd" placeholder="ç»“æŸæ—¥æœŸ">
                    </div>
                </div>

                <!-- é¦–æ¬¡è·Ÿè¿›æ—¶é—´ -->
                <div class="filter-section" data-section="firstFollow" id="section-firstFollow">
                    <div class="option-title">é¦–æ¬¡è·Ÿè¿›æ—¶é—´</div>
                    <div class="option-tags">
                        <div class="tag" data-value="30min">&lt;30åˆ†é’Ÿ</div>
                        <div class="tag" data-value="1h">&lt;1å°æ—¶</div>
                        <div class="tag" data-value="1-2h">1-2å°æ—¶</div>
                        <div class="tag" data-value="2-6h">2-6å°æ—¶</div>
                        <div class="tag" data-value="6-12h">6-12å°æ—¶</div>
                        <div class="tag" data-value="12-24h">12-24å°æ—¶</div>
                        <div class="tag" data-value="24h">&gt;24å°æ—¶</div>
                    </div>
                </div>

                <!-- è·Ÿè¿›é—´éš”æ—¶é—´ -->
                <div class="filter-section" data-section="followInterval" id="section-followInterval">
                    <div class="option-title">è·Ÿè¿›é—´éš”æ—¶é—´</div>
                    <div class="option-tags">
                        <div class="tag" data-value="6h">&lt;6å°æ—¶</div>
                        <div class="tag" data-value="6-24h">6-24å°æ—¶</div>
                        <div class="tag" data-value="24-48h">24-48å°æ—¶</div>
                        <div class="tag" data-value="48h">&gt;48å°æ—¶</div>
                    </div>
                </div>

                <!-- çº¿ç´¢æ¥æºæ¸ é“ -->
                <div class="filter-section" data-section="sourceChannel" id="section-sourceChannel">
                    <div class="option-title">çº¿ç´¢æ¥æºæ¸ é“</div>
                    <div class="option-tags">
                        <div class="tag" data-value="dianping">å¤§ä¼—ç‚¹è¯„æœç´¢</div>
                        <div class="tag" data-value="xiaohongshu">å°çº¢ä¹¦å’¨è¯¢</div>
                        <div class="tag" data-value="douyin">æŠ–éŸ³å›æ”¶å¹¿å‘Š</div>
                        <div class="tag" data-value="referral">è€å®¢æˆ·æ¨è</div>
                        <div class="tag" data-value="reactivate">å…¬æµ·å”¤é†’</div>
                    </div>
                </div>

                <!-- çº¿ç´¢åˆ›å»ºæ¸ é“ -->
                <div class="filter-section" data-section="createChannel" id="section-createChannel">
                    <div class="option-title">çº¿ç´¢åˆ›å»ºæ¸ é“</div>
                    <div class="option-tags">
                        <div class="tag" data-value="auto">è‡ªåŠ¨åˆ›å»º</div>
                        <div class="tag" data-value="manual">è¿è¥åˆ›å»º</div>
                        <div class="tag" data-value="import">æ‰¹é‡å¯¼å…¥</div>
                    </div>
                </div>

                <!-- çº¿ç´¢ç±»å‹ -->
                <div class="filter-section" data-section="leadType" id="section-leadType">
                    <div class="option-title">çº¿ç´¢ç±»å‹ï¼ˆå•é€‰ï¼‰</div>
                    <div class="option-tags">
                        <div class="tag" data-value="identify">é‰´å®šå’¨è¯¢</div>
                        <div class="tag" data-value="quote">æŠ¥ä»·å’¨è¯¢</div>
                        <div class="tag" data-value="recycle">å›æ”¶</div>
                        <div class="tag" data-value="other">å…¶å®ƒ</div>
                    </div>
                </div>

                <!-- å’¨è¯¢å•†å“æ•° -->
                <div class="filter-section" data-section="productCount" id="section-productCount">
                    <div class="option-title">å’¨è¯¢å•†å“æ•°</div>
                    <div class="option-tags">
                        <div class="tag" data-value="1">1ä¸ª</div>
                        <div class="tag" data-value="2">2ä¸ª</div>
                        <div class="tag" data-value="3-5">3-5ä¸ª</div>
                        <div class="tag" data-value="5+">&gt;5ä¸ª</div>
                    </div>
                </div>

                <!-- ä»»åŠ¡ä¼˜å…ˆçº§ -->
                <div class="filter-section" data-section="priority" id="section-priority">
                    <div class="option-title">ä»»åŠ¡ä¼˜å…ˆçº§ï¼ˆå•é€‰ï¼‰</div>
                    <div class="option-tags">
                        <div class="tag" data-value="urgent">ç´§æ€¥</div>
                        <div class="tag" data-value="normal">æ­£å¸¸</div>
                    </div>
                </div>

                <!-- è·Ÿè¿›å®¢æœ -->
                <div class="filter-section" data-section="staff" id="section-staff">
                    <div class="option-title" style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 8px; flex: 1; overflow: hidden;">
                            <span style="white-space: nowrap;">è·Ÿè¿›å®¢æœ</span>
                            <span class="brand-selected-inline" id="staffSelectedInline"></span>
                        </div>
                        <span class="brand-all-link" onclick="openStaffSelect()">é€‰æ‹© ></span>
                    </div>
                    <div id="staffSelectedList" style="display: none;">
                        <div class="brand-selected" id="staffSelectedTags"></div>
                    </div>
                </div>

                <!-- å›æ”¶æ–¹å¼ -->
                <div class="filter-section" data-section="recycleMethod" id="section-recycleMethod">
                    <div class="option-title">å›æ”¶æ–¹å¼ï¼ˆå•é€‰ï¼‰</div>
                    <div class="option-tags">
                        <div class="tag" data-value="door">ä¸Šé—¨å›æ”¶</div>
                        <div class="tag" data-value="store">åˆ°åº—å›æ”¶</div>
                        <div class="tag" data-value="mail">é‚®å¯„å›æ”¶</div>
                    </div>
                </div>

                <!-- é‰´å®šå¸ˆ -->
                <div class="filter-section" data-section="authenticator" id="section-authenticator">
                    <div class="option-title" style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 8px; flex: 1; overflow: hidden;">
                            <span style="white-space: nowrap;">é‰´å®šå¸ˆ</span>
                            <span class="brand-selected-inline" id="authenticatorSelectedInline"></span>
                        </div>
                        <span class="brand-all-link" onclick="openAuthenticatorSelect()">é€‰æ‹© ></span>
                    </div>
                    <div id="authenticatorSelectedList" style="display: none;">
                        <div class="brand-selected" id="authenticatorSelectedTags"></div>
                    </div>
                </div>

                <!-- é‰´å®šæ–¹å¼ -->
                <div class="filter-section" data-section="authMethod" id="section-authMethod">
                    <div class="option-title">å›æ”¶é‰´å®šæ–¹å¼ï¼ˆå•é€‰ï¼‰</div>
                    <div class="option-tags">
                        <div class="tag" data-value="photo">æ€»éƒ¨å›¾ç‰‡é‰´å®š</div>
                        <div class="tag" data-value="door">ä¸Šé—¨é‰´å®š</div>
                    </div>
                </div>

                <!-- æŠ¥ä»·å¸ˆ -->
                <div class="filter-section" data-section="quoter" id="section-quoter">
                    <div class="option-title" style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 8px; flex: 1; overflow: hidden;">
                            <span style="white-space: nowrap;">æŠ¥ä»·å¸ˆ</span>
                            <span class="brand-selected-inline" id="quoterSelectedInline"></span>
                        </div>
                        <span class="brand-all-link" onclick="openQuoterSelect()">é€‰æ‹© ></span>
                    </div>
                    <div id="quoterSelectedList" style="display: none;">
                        <div class="brand-selected" id="quoterSelectedTags"></div>
                    </div>
                </div>

                <!-- æŠ¥ä»·æ–¹å¼ -->
                <div class="filter-section" data-section="quoteMethod" id="section-quoteMethod">
                    <div class="option-title">å›æ”¶æŠ¥ä»·æ–¹å¼ï¼ˆå•é€‰ï¼‰</div>
                    <div class="option-tags">
                        <div class="tag" data-value="photo">æ€»éƒ¨å›¾ç‰‡æŠ¥ä»·</div>
                        <div class="tag" data-value="door">ä¸Šé—¨æŠ¥ä»·</div>
                    </div>
                </div>

                <!-- å…¥åº“æ—¶é—´ -->
                <div class="filter-section" data-section="inboundTime" id="section-inboundTime">
                    <div class="option-title">å…¥åº“æ—¶é—´</div>
                    <div class="time-range">
                        <input type="date" class="time-input" id="inboundTimeStart" placeholder="å¼€å§‹æ—¥æœŸ">
                        <span>è‡³</span>
                        <input type="date" class="time-input" id="inboundTimeEnd" placeholder="ç»“æŸæ—¥æœŸ">
                    </div>
                </div>

                <!-- å‡ºåº“æ—¶é—´ -->
                <div class="filter-section" data-section="outboundTime" id="section-outboundTime">
                    <div class="option-title">å‡ºåº“æ—¶é—´</div>
                    <div class="time-range">
                        <input type="date" class="time-input" id="outboundTimeStart" placeholder="å¼€å§‹æ—¥æœŸ">
                        <span>è‡³</span>
                        <input type="date" class="time-input" id="outboundTimeEnd" placeholder="ç»“æŸæ—¥æœŸ">
                    </div>
                </div>

                <!-- ç›˜ç‚¹å‡†ç¡®ç‡ -->
                <div class="filter-section" data-section="accuracy" id="section-accuracy">
                    <div class="option-title">ç›˜ç‚¹å‡†ç¡®ç‡</div>
                    <div class="option-tags">
                        <div class="tag" data-value="100">100%</div>
                        <div class="tag" data-value="99">99%</div>
                        <div class="tag" data-value="95-98">95-98%</div>
                        <div class="tag" data-value="90-95">90-95%</div>
                        <div class="tag" data-value="90">&lt;90%</div>
                    </div>
                </div>

                <!-- æŒ‚ç­¾ -->
                <div class="filter-section" data-section="tag" id="section-tag">
                    <div class="option-title">æŒ‚ç­¾ï¼ˆå•é€‰ï¼‰</div>
                    <div class="option-tags">
                        <div class="tag" data-value="yes">å·²æŒ‚ç­¾</div>
                        <div class="tag" data-value="no">æœªæŒ‚ç­¾</div>
                    </div>
                </div>

                <!-- ç”¨æˆ·çº§åˆ« -->
                <div class="filter-section" data-section="userLevel" id="section-userLevel">
                    <div class="option-title">ç”¨æˆ·çº§åˆ«ï¼ˆå•é€‰ï¼‰</div>
                    <div class="option-tags">
                        <div class="tag" data-value="vip">VIPä¼šå‘˜</div>
                        <div class="tag" data-value="regular">æ™®é€šä¼šå‘˜</div>
                        <div class="tag" data-value="new">æ–°ç”¨æˆ·</div>
                    </div>
                </div>

                <!-- å›æ”¶å•†å“æ•° -->
                <div class="filter-section" data-section="recycleCount" id="section-recycleCount">
                    <div class="option-title">å›æ”¶å•†å“æ•°</div>
                    <div class="option-tags">
                        <div class="tag" data-value="0">æ— </div>
                        <div class="tag" data-value="1">1ä»¶</div>
                        <div class="tag" data-value="2">2ä»¶</div>
                        <div class="tag" data-value="3-5">3-5ä»¶</div>
                        <div class="tag" data-value="6-10">6-10ä»¶</div>
                        <div class="tag" data-value="11-20">11-20ä»¶</div>
                        <div class="tag" data-value="20+">&gt;20ä»¶</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨æŒ‰é’® -->
        <div class="filter-footer">
            <button class="btn btn-reset" onclick="resetFilter()">é‡ç½®</button>
            <button class="btn btn-confirm" onclick="confirmFilter()">ç¡®è®¤</button>
        </div>
    </div>

    <!-- å…¨éƒ¨å“ç‰ŒäºŒçº§é¡µ -->
    <div class="secondary-page" id="brandAllPage">
        <div class="secondary-header">
            <span class="back-btn" onclick="closeBrandAll()">â€¹</span>
            <span class="secondary-title">å…¨éƒ¨å“ç‰Œ</span>
        </div>
        <div class="secondary-content" style="padding: 0;">
            <!-- å·²é€‰å“ç‰Œé¡¶éƒ¨æ˜¾ç¤º -->
            <div id="brandSelectedTop" style="display: none; padding: 12px 16px; background: #f5f5f5; border-bottom: 1px solid #e5e5e5;">
                <div style="font-size: 12px; color: #666; margin-bottom: 8px;">å·²é€‰å“ç‰Œ</div>
                <div id="brandSelectedTopTags" style="display: flex; flex-wrap: wrap; gap: 8px;">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <!-- æœç´¢æ¡† -->
            <div class="member-search" style="padding: 16px;">
                <input type="text" placeholder="æœç´¢å“ç‰Œåç§°" oninput="searchBrand(this.value)" id="brandSearchInput">
            </div>
            
            <!-- åŸåˆ†ç»„åˆ—è¡¨ -->
            <div id="brandGroupList">
                <!-- å“ç‰Œåˆ†ç»„å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <!-- æœç´¢ç»“æœ -->
            <div id="brandSearchResult" style="display: none;">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        <div class="filter-footer">
            <button class="btn btn-reset" onclick="resetBrandSelect()">é‡ç½®</button>
            <button class="btn btn-confirm" onclick="confirmBrandAll()">ç¡®å®š</button>
        </div>
    </div>

    <!-- å®¢æœé€‰æ‹©äºŒçº§é¡µ -->
    <div class="secondary-page" id="staffPage">
        <div class="secondary-header">
            <span class="back-btn" onclick="closeStaffSelect()">â€¹</span>
            <span class="secondary-title">é€‰æ‹©å®¢æœ</span>
        </div>
        <div class="secondary-content" style="padding: 0;">
            <div class="member-search" style="padding: 16px;">
                <input type="text" placeholder="æœç´¢å®¢æœå§“å" oninput="searchMember('staff', this.value)" id="staffSearchInput">
            </div>
            <div id="staffGroupList">
                <!-- å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div id="staffSearchResult" style="display: none;">
                <!-- æœç´¢ç»“æœ -->
            </div>
        </div>
        <div class="filter-footer">
            <button class="btn btn-reset" onclick="resetMemberSelect('staff')">é‡ç½®</button>
            <button class="btn btn-confirm" onclick="confirmStaffSelect()">ç¡®å®š</button>
        </div>
    </div>

    <!-- é‰´å®šå¸ˆé€‰æ‹©äºŒçº§é¡µ -->
    <div class="secondary-page" id="authenticatorPage">
        <div class="secondary-header">
            <span class="back-btn" onclick="closeAuthenticatorSelect()">â€¹</span>
            <span class="secondary-title">é€‰æ‹©é‰´å®šå¸ˆ</span>
        </div>
        <div class="secondary-content" style="padding: 0;">
            <div class="member-search" style="padding: 16px;">
                <input type="text" placeholder="æœç´¢é‰´å®šå¸ˆå§“å" oninput="searchMember('authenticator', this.value)" id="authenticatorSearchInput">
            </div>
            <div id="authenticatorGroupList">
                <!-- å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div id="authenticatorSearchResult" style="display: none;">
                <!-- æœç´¢ç»“æœ -->
            </div>
        </div>
        <div class="filter-footer">
            <button class="btn btn-reset" onclick="resetMemberSelect('authenticator')">é‡ç½®</button>
            <button class="btn btn-confirm" onclick="confirmAuthenticatorSelect()">ç¡®å®š</button>
        </div>
    </div>

    <!-- æŠ¥ä»·å¸ˆé€‰æ‹©äºŒçº§é¡µ -->
    <div class="secondary-page" id="quoterPage">
        <div class="secondary-header">
            <span class="back-btn" onclick="closeQuoterSelect()">â€¹</span>
            <span class="secondary-title">é€‰æ‹©æŠ¥ä»·å¸ˆ</span>
        </div>
        <div class="secondary-content" style="padding: 0;">
            <div class="member-search" style="padding: 16px;">
                <input type="text" placeholder="æœç´¢æŠ¥ä»·å¸ˆå§“å" oninput="searchMember('quoter', this.value)" id="quoterSearchInput">
            </div>
            <div id="quoterGroupList">
                <!-- å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div id="quoterSearchResult" style="display: none;">
                <!-- æœç´¢ç»“æœ -->
            </div>
        </div>
        <div class="filter-footer">
            <button class="btn btn-reset" onclick="resetMemberSelect('quoter')">é‡ç½®</button>
            <button class="btn btn-confirm" onclick="confirmQuoterSelect()">ç¡®å®š</button>
        </div>
    </div>

    <!-- ä»“åº“é€‰æ‹©äºŒçº§é¡µ -->
    <div class="secondary-page" id="warehousePage">
        <div class="secondary-header">
            <span class="back-btn" onclick="closeWarehouseSelect()">â€¹</span>
            <span class="secondary-title">é€‰æ‹©ä»“åº“</span>
        </div>
        <div class="secondary-content" style="padding: 0;">
            <div id="warehouseListItems">
                <div class="list-item" data-value="hq">
                    <span>æ€»éƒ¨ä»“</span>
                    <span class="check-icon">âœ“</span>
                </div>
                <div class="list-item" data-value="east">
                    <span>åä¸œä»“</span>
                    <span class="check-icon">âœ“</span>
                </div>
                <div class="list-item" data-value="south">
                    <span>åå—ä»“</span>
                    <span class="check-icon">âœ“</span>
                </div>
                <div class="list-item" data-value="north">
                    <span>ååŒ—ä»“</span>
                    <span class="check-icon">âœ“</span>
                </div>
                <div class="list-item" data-value="west">
                    <span>åè¥¿ä»“</span>
                    <span class="check-icon">âœ“</span>
                </div>
            </div>
        </div>
        <div class="filter-footer">
            <button class="btn btn-reset" onclick="resetWarehouseSelect()">é‡ç½®</button>
            <button class="btn btn-confirm" onclick="confirmWarehouseSelect()">ç¡®å®š</button>
        </div>
    </div>

    <script>
        // å…¨å±€çŠ¶æ€
        let filterState = {
            brand: [],
            category: [],
            condition: [],
            status: [],
            warehouse: null,
            createTime: null,
            bookTime: null,
            firstFollow: [],
            followInterval: [],
            sourceChannel: [],
            createChannel: [],
            leadType: null,
            productCount: [],
            priority: null,
            staff: [],  // æ”¹ä¸ºæ•°ç»„æ”¯æŒå¤šé€‰
            recycleMethod: null,
            authenticator: [],  // æ”¹ä¸ºæ•°ç»„æ”¯æŒå¤šé€‰
            authMethod: null,
            quoter: [],  // æ”¹ä¸ºæ•°ç»„æ”¯æŒå¤šé€‰
            quoteMethod: null,
            inboundTime: null,
            outboundTime: null,
            accuracy: [],
            tag: null,
            userLevel: null,
            recycleCount: []
        };

        let currentSort = 'create-desc';
        let isScrolling = false;

        // å“ç‰Œæ•°æ®ï¼ˆæŒ‰é¦–å­—æ¯åˆ†ç»„ï¼‰
        const brandData = {
            'A': ['Alexander McQueen', 'Armani'],
            'B': ['Balenciaga', 'Bottega Veneta', 'Bulgari', 'Burberry'],
            'C': ['Cartier', 'Celine', 'Chanel', 'ChloÃ©', 'Coach'],
            'D': ['Dior'],
            'F': ['Fendi', 'Ferragamo'],
            'G': ['Givenchy', 'Gucci'],
            'H': ['HermÃ¨s'],
            'L': ['Loewe', 'Longchamp', 'Louis Vuitton'],
            'M': ['MCM', 'Miu Miu', 'Montblanc'],
            'O': ['Omega'],
            'P': ['Patek Philippe', 'Prada'],
            'R': ['Rolex'],
            'S': ['Saint Laurent'],
            'T': ['Tiffany & Co.', 'Tod\'s'],
            'V': ['Valentino', 'Versace']
        };

        // æˆå‘˜æ•°æ®
        const memberData = {
            staff: {
                'å®¢æœ1ç»„': ['å¼ æ™“æ˜', 'ææ€é›¨', 'ç‹æµ©ç„¶', 'é™ˆå©‰å©·'],
                'å®¢æœ2ç»„': ['åˆ˜å®‡èˆª', 'èµµæ¬£æ€¡', 'å­™æ‚¦', 'å‘¨é™'],
                'å®¢æœ3ç»„': ['å´ä¿Šæ°', 'éƒ‘é›…çª', 'é’±æµ©å®‡', 'å†¯æ€æ¶µ']
            },
            authenticator: {
                'é‰´å®šå¸ˆ1ç»„': ['æ—å»ºå›½', 'é»„æ•', 'æ¢æ–‡æ–Œ'],
                'é‰´å®šå¸ˆ2ç»„': ['è®¸å©·å©·', 'ä½•ä¼Ÿ', 'é‚“ä¸½']
            },
            quoter: {
                'æŠ¥ä»·å¸ˆ1ç»„': ['è°¢å†›', 'æ›¹èŠ³', 'æ¨æ¶›'],
                'æŠ¥ä»·å¸ˆ2ç»„': ['éŸ©é›ª', 'è‘£æ˜', 'å§šå¼º']
            }
        };

        // æ’åºæŒ‰é’®ç‚¹å‡»
        document.getElementById('sortBtn').addEventListener('click', function() {
            const wrapper = document.getElementById('sortDropdownWrapper');
            wrapper.classList.toggle('show');
            this.classList.toggle('active');
        });

        // å…³é—­æ’åºä¸‹æ‹‰
        function closeSortDropdown() {
            document.getElementById('sortDropdownWrapper').classList.remove('show');
            document.getElementById('sortBtn').classList.remove('active');
        }

        // æ’åºé€‰é¡¹ç‚¹å‡»
        document.querySelectorAll('.sort-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.sort-option').forEach(o => o.classList.remove('active'));
                this.classList.add('active');
                currentSort = this.dataset.sort;
                
                // æ›´æ–°æ’åºæŒ‰é’®æ ‡é¢˜
                document.getElementById('sortLabel').textContent = this.textContent;
                
                closeSortDropdown();
                console.log('æ’åºæ–¹å¼:', currentSort);
            });
        });

        // æ‰“å¼€ç­›é€‰
        function openFilter() {
            document.getElementById('overlay').classList.add('show');
            document.getElementById('filterPanel').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        // å…³é—­ç­›é€‰
        function closeFilter() {
            document.getElementById('overlay').classList.remove('show');
            document.getElementById('filterPanel').classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        // å·¦ä¾§å¯¼èˆªç‚¹å‡»
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                const section = this.dataset.section;
                
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                this.classList.add('active');
                
                // æ»šåŠ¨åˆ°å¯¹åº”åŒºåŸŸ
                const targetSection = document.getElementById('section-' + section);
                if (targetSection) {
                    isScrolling = true;
                    const optionsContainer = document.getElementById('filterOptions');
                    const offsetTop = targetSection.offsetTop - 16;
                    optionsContainer.scrollTo({
                        top: offsetTop,
                        behavior: 'smooth'
                    });
                    
                    // æ»šåŠ¨å®Œæˆåæ·»åŠ æŠ–åŠ¨æ•ˆæœ
                    setTimeout(() => {
                        isScrolling = false;
                        targetSection.classList.add('shake');
                        // åŠ¨ç”»ç»“æŸåç§»é™¤class
                        setTimeout(() => {
                            targetSection.classList.remove('shake');
                        }, 500);
                    }, 300);
                }
            });
        });

        // å³ä¾§æ»šåŠ¨è”åŠ¨å·¦ä¾§å¯¼èˆª
        document.getElementById('filterOptions').addEventListener('scroll', function() {
            if (isScrolling) return;
            
            const sections = document.querySelectorAll('.filter-section');
            const scrollTop = this.scrollTop;
            
            let currentSection = null;
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (scrollTop >= sectionTop) {
                    currentSection = section.dataset.section;
                }
            });
            
            if (currentSection) {
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                const activeNav = document.querySelector(`.nav-item[data-section="${currentSection}"]`);
                if (activeNav) {
                    activeNav.classList.add('active');
                }
            }
        });

        // å•é€‰é¡¹åˆ—è¡¨
        const singleSelectSections = ['warehouse', 'leadType', 'priority', 'recycleMethod', 'authMethod', 'quoteMethod', 'tag', 'userLevel', 'createTime'];

        // æ ‡ç­¾ç‚¹å‡»
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('tag') && !e.target.classList.contains('disabled')) {
                const section = e.target.closest('.filter-section');
                if (!section) return;
                
                const sectionName = section.dataset.section;
                const value = e.target.dataset.value;
                
                // ç‰¹æ®Šå¤„ç†å“ç‰Œæ¨èæ ‡ç­¾
                if (sectionName === 'brand' && e.target.closest('#brandRecommendTags')) {
                    e.target.classList.toggle('active');
                    
                    if (e.target.classList.contains('active')) {
                        if (!filterState.brand.includes(value)) {
                            filterState.brand.push(value);
                        }
                    } else {
                        filterState.brand = filterState.brand.filter(v => v !== value);
                    }
                    
                    updateBrandSelected();
                    updateFilterBadge();
                    updateNavDots();
                    return;
                }
                
                // ç‰¹æ®Šå¤„ç†æ—¶é—´å¿«æ·é€‰é¡¹
                if (sectionName === 'createTime' && e.target.closest('#createTimeQuickTags')) {
                    // å•é€‰é€»è¾‘
                    const allTags = document.querySelectorAll('#createTimeQuickTags .tag');
                    allTags.forEach(t => t.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    // å¡«å……æ—¶é—´èŒƒå›´
                    fillTimeRange('createTime', value);
                    filterState.createTime = value;
                    updateFilterBadge();
                    updateNavDots();
                    return;
                }
                
                if (singleSelectSections.includes(sectionName)) {
                    // å•é€‰é€»è¾‘ - æ”¯æŒå–æ¶ˆ
                    const allTags = e.target.closest('.option-tags').querySelectorAll('.tag');
                    
                    if (e.target.classList.contains('active')) {
                        // å¦‚æœå·²é€‰ä¸­,åˆ™å–æ¶ˆ
                        e.target.classList.remove('active');
                        filterState[sectionName] = null;
                    } else {
                        // é€‰ä¸­æ–°çš„
                        allTags.forEach(t => t.classList.remove('active'));
                        e.target.classList.add('active');
                        filterState[sectionName] = value;
                    }
                } else {
                    // å¤šé€‰é€»è¾‘
                    e.target.classList.toggle('active');
                    
                    if (e.target.classList.contains('active')) {
                        if (!filterState[sectionName].includes(value)) {
                            filterState[sectionName].push(value);
                        }
                    } else {
                        filterState[sectionName] = filterState[sectionName].filter(v => v !== value);
                    }
                }
                
                updateFilterBadge();
                updateNavDots();
            }
        });

        // å¡«å……æ—¶é—´èŒƒå›´
        function fillTimeRange(type, value) {
            const today = new Date();
            const endInput = document.getElementById(type + 'End');
            const startInput = document.getElementById(type + 'Start');
            
            endInput.value = formatDate(today);
            
            let startDate = new Date();
            switch(value) {
                case 'today':
                    startDate = today;
                    break;
                case 'week':
                    startDate.setDate(today.getDate() - 7);
                    break;
                case 'month':
                    startDate.setDate(today.getDate() - 30);
                    break;
                case '3month':
                    startDate.setMonth(today.getMonth() - 3);
                    break;
            }
            
            startInput.value = formatDate(startDate);
        }

        // æ ¼å¼åŒ–æ—¥æœŸ
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        // æ›´æ–°ç­›é€‰æ€»æ•°
        function updateFilterBadge() {
            let count = 0;
            
            for (let key in filterState) {
                if (Array.isArray(filterState[key])) {
                    count += filterState[key].length;
                } else if (filterState[key] !== null) {
                    count += 1;
                }
            }
            
            const badge = document.getElementById('filterBadge');
            if (count > 0) {
                badge.style.display = 'flex';
                badge.textContent = count;
            } else {
                badge.style.display = 'none';
            }
        }

        // æ›´æ–°å¯¼èˆªçº¢ç‚¹
        function updateNavDots() {
            document.querySelectorAll('.nav-item').forEach(item => {
                const section = item.dataset.section;
                const dot = item.querySelector('.dot');
                
                let hasSelection = false;
                if (Array.isArray(filterState[section])) {
                    hasSelection = filterState[section].length > 0;
                } else {
                    hasSelection = filterState[section] !== null;
                }
                
                if (hasSelection) {
                    dot.classList.add('show');
                } else {
                    dot.classList.remove('show');
                }
            });
        }

        // é‡ç½®ç­›é€‰
        function resetFilter() {
            for (let key in filterState) {
                if (Array.isArray(filterState[key])) {
                    filterState[key] = [];
                } else {
                    filterState[key] = null;
                }
            }
            
            document.querySelectorAll('.tag.active').forEach(tag => {
                tag.classList.remove('active');
            });
            
            document.querySelectorAll('.time-input').forEach(input => {
                input.value = '';
            });
            
            // é‡ç½®æˆå‘˜å’Œä»“åº“é€‰æ‹©æ˜¾ç¤º
            updateMemberDisplay('staff');
            updateMemberDisplay('authenticator');
            updateMemberDisplay('quoter');
            updateWarehouseDisplay();
            
            updateFilterBadge();
            updateNavDots();
            updateBrandSelected();
        }

        // ç¡®è®¤ç­›é€‰
        function confirmFilter() {
            console.log('ç­›é€‰æ¡ä»¶:', filterState);
            closeFilter();
        }

        // ========== å“ç‰Œç›¸å…³ ==========
        
        // åˆå§‹åŒ–å“ç‰Œåˆ—è¡¨
        function initBrandList() {
            const container = document.getElementById('brandGroupList');
            container.innerHTML = '';
            
            for (let letter in brandData) {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'list-group';
                
                const letterDiv = document.createElement('div');
                letterDiv.className = 'list-group-header';
                letterDiv.innerHTML = `<span class="arrow">â–¼</span><span>${letter}</span>`;
                letterDiv.addEventListener('click', function() {
                    this.classList.toggle('collapsed');
                    this.nextElementSibling.classList.toggle('collapsed');
                });
                groupDiv.appendChild(letterDiv);
                
                const itemsDiv = document.createElement('div');
                itemsDiv.className = 'list-group-items';
                
                brandData[letter].forEach(brand => {
                    const item = document.createElement('div');
                    item.className = 'list-item';
                    const value = brand.toLowerCase().replace(/\s+/g, '-');
                    item.dataset.value = value;
                    
                    // æ£€æŸ¥æ˜¯å¦å·²é€‰
                    if (filterState.brand.includes(value)) {
                        item.classList.add('active');
                    }
                    
                    item.innerHTML = `
                        <span>${brand}</span>
                        <span class="check-icon">âœ“</span>
                    `;
                    
                    item.addEventListener('click', function() {
                        this.classList.toggle('active');
                        const val = this.dataset.value;
                        
                        if (this.classList.contains('active')) {
                            if (!filterState.brand.includes(val)) {
                                filterState.brand.push(val);
                            }
                        } else {
                            filterState.brand = filterState.brand.filter(v => v !== val);
                        }
                        
                        updateBrandSelectedTop();
                    });
                    
                    itemsDiv.appendChild(item);
                });
                
                groupDiv.appendChild(itemsDiv);
                container.appendChild(groupDiv);
            }
        }

        // æ›´æ–°é¡¶éƒ¨å·²é€‰å“ç‰Œæ˜¾ç¤º
        function updateBrandSelectedTop() {
            const topContainer = document.getElementById('brandSelectedTop');
            const topTags = document.getElementById('brandSelectedTopTags');
            
            if (filterState.brand.length > 0) {
                topContainer.style.display = 'block';
                topTags.innerHTML = '';
                
                filterState.brand.forEach(value => {
                    // æ‰¾åˆ°å“ç‰Œåç§°
                    let brandName = '';
                    for (let letter in brandData) {
                        const found = brandData[letter].find(b => b.toLowerCase().replace(/\s+/g, '-') === value);
                        if (found) {
                            brandName = found;
                            break;
                        }
                    }
                    
                    if (!brandName) {
                        const recommendTag = document.querySelector(`#brandRecommendTags .tag[data-value="${value}"]`);
                        brandName = recommendTag ? recommendTag.textContent : value;
                    }
                    
                    const tag = document.createElement('div');
                    tag.className = 'brand-selected-tag';
                    tag.innerHTML = `${brandName}<span class="close">Ã—</span>`;
                    tag.onclick = function() {
                        removeBrandFromTop(value);
                    };
                    topTags.appendChild(tag);
                });
            } else {
                topContainer.style.display = 'none';
            }
        }

        // ä»é¡¶éƒ¨ç§»é™¤å“ç‰Œ
        function removeBrandFromTop(value) {
            filterState.brand = filterState.brand.filter(v => v !== value);
            updateBrandSelectedTop();
            
            // åŒæ­¥åˆ—è¡¨ä¸­çš„é€‰ä¸­çŠ¶æ€
            const allItems = document.querySelectorAll('#brandGroupList .list-item, #brandSearchResult .list-item');
            allItems.forEach(item => {
                if (item.dataset.value === value) {
                    item.classList.remove('active');
                }
            });
        }

        function openBrandAll() {
            initBrandList();
            updateBrandSelectedTop();
            // æ¸…ç©ºæœç´¢æ¡†å¹¶æ¢å¤åŸåˆ—è¡¨
            const searchInput = document.getElementById('brandSearchInput');
            if (searchInput) searchInput.value = '';
            document.getElementById('brandGroupList').style.display = 'block';
            document.getElementById('brandSearchResult').style.display = 'none';
            document.getElementById('brandAllPage').classList.add('show');
        }

        function closeBrandAll() {
            document.getElementById('brandAllPage').classList.remove('show');
        }

        function confirmBrandAll() {
            updateBrandSelected();  // è¿™ä¼šåŒæ­¥æ¨èå“ç‰Œçš„é€‰ä¸­çŠ¶æ€
            updateFilterBadge();
            updateNavDots();
            closeBrandAll();
        }

        // é‡ç½®å“ç‰Œé€‰æ‹©
        function resetBrandSelect() {
            // æ¸…ç©ºé€‰æ‹©çŠ¶æ€
            filterState.brand = [];
            
            // æ¸…ç©ºæœç´¢æ¡†
            const searchInput = document.getElementById('brandSearchInput');
            if (searchInput) searchInput.value = '';
            
            // æ¢å¤åŸåˆ—è¡¨æ˜¾ç¤º
            document.getElementById('brandGroupList').style.display = 'block';
            document.getElementById('brandSearchResult').style.display = 'none';
            
            // ç§»é™¤æ‰€æœ‰activeçŠ¶æ€
            const allItems = document.querySelectorAll('#brandGroupList .list-item, #brandSearchResult .list-item');
            allItems.forEach(item => item.classList.remove('active'));
            
            // æ›´æ–°æ˜¾ç¤º
            updateBrandSelectedTop();
            updateBrandSelected();
            updateFilterBadge();
            updateNavDots();
        }

        function updateBrandSelected() {
            const selectedInline = document.getElementById('brandSelectedInline');
            if (filterState.brand.length > 0) {
                const brandNames = filterState.brand.map(value => {
                    for (let letter in brandData) {
                        const found = brandData[letter].find(b => b.toLowerCase().replace(/\s+/g, '-') === value);
                        if (found) return found;
                    }
                    // å¦‚æœåœ¨brandDataä¸­æ‰¾ä¸åˆ°,å°è¯•ä»æ¨èå“ç‰Œä¸­è·å–
                    const recommendTag = document.querySelector(`#brandRecommendTags .tag[data-value="${value}"]`);
                    return recommendTag ? recommendTag.textContent : value;
                });
                selectedInline.innerHTML = `<span class="brand-selected-text">${brandNames.join('ã€')}</span>`;
                
                // åŒæ­¥æ¨èå“ç‰Œçš„é€‰ä¸­çŠ¶æ€
                const recommendTags = document.querySelectorAll('#brandRecommendTags .tag');
                recommendTags.forEach(tag => {
                    if (filterState.brand.includes(tag.dataset.value)) {
                        tag.classList.add('active');
                    } else {
                        tag.classList.remove('active');
                    }
                });
            } else {
                selectedInline.innerHTML = '';
                // æ¸…é™¤æ¨èå“ç‰Œçš„é€‰ä¸­çŠ¶æ€
                const recommendTags = document.querySelectorAll('#brandRecommendTags .tag');
                recommendTags.forEach(tag => tag.classList.remove('active'));
            }
        }

        function removeBrand(value) {
            filterState.brand = filterState.brand.filter(v => v !== value);
            updateBrandSelected();
            updateFilterBadge();
            updateNavDots();
        }

        function searchBrand(keyword) {
            const groupList = document.getElementById('brandGroupList');
            const searchResult = document.getElementById('brandSearchResult');
            
            // æ¸…ç©ºå…³é”®å­—æ—¶æ¢å¤åŸåˆ—è¡¨
            if (!keyword || keyword.trim() === '') {
                groupList.style.display = 'block';
                searchResult.style.display = 'none';
                return;
            }
            
            // éšè—åŸåˆ—è¡¨,æ˜¾ç¤ºæœç´¢ç»“æœ
            groupList.style.display = 'none';
            searchResult.style.display = 'block';
            
            // æ”¶é›†æ‰€æœ‰åŒ¹é…çš„å“ç‰Œ
            const matchedBrands = [];
            for (let letter in brandData) {
                brandData[letter].forEach(brand => {
                    if (brand.toLowerCase().includes(keyword.toLowerCase())) {
                        const value = brand.toLowerCase().replace(/\s+/g, '-');
                        matchedBrands.push({
                            name: brand,
                            letter: letter,
                            value: value
                        });
                    }
                });
            }
            
            // ç”Ÿæˆæœç´¢ç»“æœåˆ—è¡¨
            if (matchedBrands.length > 0) {
                let html = '<div class="search-result-container">';
                
                matchedBrands.forEach(item => {
                    const isSelected = filterState.brand.includes(item.value);
                    const activeClass = isSelected ? 'active' : '';
                    
                    html += `
                        <div class="list-item ${activeClass}" data-value="${item.value}" onclick="toggleBrandInSearch('${item.value}', this)">
                            <div>
                                <div style="font-size: 14px; color: #333;">${item.name}</div>
                                <div style="font-size: 12px; color: #999; margin-top: 2px;">${item.letter} ç»„</div>
                            </div>
                            <span class="check-icon">âœ“</span>
                        </div>
                    `;
                });
                
                html += '</div>';
                searchResult.innerHTML = html;
            } else {
                searchResult.innerHTML = '<div class="search-result-empty">æœªæ‰¾åˆ°åŒ¹é…çš„å“ç‰Œ</div>';
            }
        }

        // åœ¨æœç´¢ç»“æœä¸­åˆ‡æ¢å“ç‰Œé€‰ä¸­çŠ¶æ€
        function toggleBrandInSearch(value, element) {
            element.classList.toggle('active');
            
            if (element.classList.contains('active')) {
                if (!filterState.brand.includes(value)) {
                    filterState.brand.push(value);
                }
            } else {
                filterState.brand = filterState.brand.filter(v => v !== value);
            }
            
            updateBrandSelectedTop();
            updateBrandSelected();
            updateFilterBadge();
            updateNavDots();
        }

        // ========== æˆå‘˜é€‰æ‹©ç›¸å…³ ==========
        
        function initMemberList(type) {
            const container = document.getElementById(type + 'GroupList');
            container.innerHTML = '';
            
            const groups = memberData[type];
            for (let groupName in groups) {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'list-group';
                
                const headerDiv = document.createElement('div');
                headerDiv.className = 'list-group-header';
                headerDiv.innerHTML = `<span class="arrow">â–¼</span><span>${groupName}</span>`;
                headerDiv.addEventListener('click', function() {
                    this.classList.toggle('collapsed');
                    this.nextElementSibling.classList.toggle('collapsed');
                });
                groupDiv.appendChild(headerDiv);
                
                const itemsDiv = document.createElement('div');
                itemsDiv.className = 'list-group-items';
                
                groups[groupName].forEach(member => {
                    const item = document.createElement('div');
                    item.className = 'list-item';
                    item.dataset.value = member;
                    
                    // æ£€æŸ¥æ˜¯å¦å·²é€‰ä¸­
                    if (filterState[type] && filterState[type].includes(member)) {
                        item.classList.add('active');
                    }
                    
                    item.innerHTML = `
                        <span>${member}</span>
                        <span class="check-icon">âœ“</span>
                    `;
                    
                    item.addEventListener('click', function() {
                        this.classList.toggle('active');
                        const value = this.dataset.value;
                        
                        if (this.classList.contains('active')) {
                            if (!filterState[type].includes(value)) {
                                filterState[type].push(value);
                            }
                        } else {
                            filterState[type] = filterState[type].filter(v => v !== value);
                        }
                        
                        updateMemberDisplay(type);
                        updateFilterBadge();
                        updateNavDots();
                    });
                    
                    itemsDiv.appendChild(item);
                });
                
                groupDiv.appendChild(itemsDiv);
                container.appendChild(groupDiv);
            }
        }

        function updateMemberDisplay(type) {
            const members = filterState[type];
            const selectedInline = document.getElementById(type + 'SelectedInline');
            const selectedList = document.getElementById(type + 'SelectedList');
            const selectedTags = document.getElementById(type + 'SelectedTags');
            
            if (members && members.length > 0) {
                // æ›´æ–°æ ‡é¢˜è¡Œæ˜¾ç¤º
                selectedInline.innerHTML = `<span class="brand-selected-text">${members.join('ã€')}</span>`;
                
                // æ›´æ–°è¯¦ç»†åˆ—è¡¨
                if (selectedList && selectedTags) {
                    selectedList.style.display = 'block';
                    selectedTags.innerHTML = '';
                    members.forEach(member => {
                        const tag = document.createElement('div');
                        tag.className = 'selected-tag';
                        tag.innerHTML = `${member}<span class="close" onclick="removeMember('${type}', '${member}')">Ã—</span>`;
                        selectedTags.appendChild(tag);
                    });
                }
            } else {
                selectedInline.innerHTML = '';
                if (selectedList) {
                    selectedList.style.display = 'none';
                }
            }
        }

        function removeMember(type, member) {
            filterState[type] = filterState[type].filter(m => m !== member);
            updateMemberDisplay(type);
            updateFilterBadge();
            updateNavDots();
            
            // åŒæ­¥äºŒçº§é¡µé¢ä¸­çš„é€‰ä¸­çŠ¶æ€
            const page = document.getElementById(type + 'Page');
            if (page) {
                const tags = page.querySelectorAll('.tag');
                tags.forEach(tag => {
                    if (tag.dataset.value === member) {
                        tag.classList.remove('active');
                    }
                });
            }
        }

        function openStaffSelect() {
            initMemberList('staff');
            // æ¸…ç©ºæœç´¢æ¡†å¹¶æ¢å¤åŸåˆ—è¡¨
            document.getElementById('staffSearchInput').value = '';
            document.getElementById('staffGroupList').style.display = 'block';
            document.getElementById('staffSearchResult').style.display = 'none';
            document.getElementById('staffPage').classList.add('show');
        }

        function closeStaffSelect() {
            document.getElementById('staffPage').classList.remove('show');
        }

        function confirmStaffSelect() {
            updateMemberDisplay('staff');
            updateFilterBadge();
            updateNavDots();
            closeStaffSelect();
        }

        function openAuthenticatorSelect() {
            initMemberList('authenticator');
            // æ¸…ç©ºæœç´¢æ¡†å¹¶æ¢å¤åŸåˆ—è¡¨
            document.getElementById('authenticatorSearchInput').value = '';
            document.getElementById('authenticatorGroupList').style.display = 'block';
            document.getElementById('authenticatorSearchResult').style.display = 'none';
            document.getElementById('authenticatorPage').classList.add('show');
        }

        function closeAuthenticatorSelect() {
            document.getElementById('authenticatorPage').classList.remove('show');
        }

        function confirmAuthenticatorSelect() {
            updateMemberDisplay('authenticator');
            updateFilterBadge();
            updateNavDots();
            closeAuthenticatorSelect();
        }

        function openQuoterSelect() {
            initMemberList('quoter');
            // æ¸…ç©ºæœç´¢æ¡†å¹¶æ¢å¤åŸåˆ—è¡¨
            document.getElementById('quoterSearchInput').value = '';
            document.getElementById('quoterGroupList').style.display = 'block';
            document.getElementById('quoterSearchResult').style.display = 'none';
            document.getElementById('quoterPage').classList.add('show');
        }

        function closeQuoterSelect() {
            document.getElementById('quoterPage').classList.remove('show');
        }

        function confirmQuoterSelect() {
            updateMemberDisplay('quoter');
            updateFilterBadge();
            updateNavDots();
            closeQuoterSelect();
        }

        // é‡ç½®æˆå‘˜é€‰æ‹©
        function resetMemberSelect(type) {
            // æ¸…ç©ºé€‰æ‹©çŠ¶æ€
            filterState[type] = [];
            
            // æ¸…ç©ºæœç´¢æ¡†
            const searchInput = document.getElementById(type + 'SearchInput');
            if (searchInput) {
                searchInput.value = '';
            }
            
            // æ¢å¤åŸåˆ—è¡¨æ˜¾ç¤º
            const groupList = document.getElementById(type + 'GroupList');
            const searchResult = document.getElementById(type + 'SearchResult');
            if (groupList) groupList.style.display = 'block';
            if (searchResult) searchResult.style.display = 'none';
            
            // ç§»é™¤æ‰€æœ‰activeçŠ¶æ€
            const allItems = document.querySelectorAll(`#${type}GroupList .list-item, #${type}SearchResult .list-item`);
            allItems.forEach(item => item.classList.remove('active'));
            
            // æ›´æ–°æ˜¾ç¤º
            updateMemberDisplay(type);
            updateFilterBadge();
            updateNavDots();
        }

        function searchMember(type, keyword) {
            const groupList = document.getElementById(type + 'GroupList');
            const searchResult = document.getElementById(type + 'SearchResult');
            
            // æ¸…ç©ºå…³é”®å­—æ—¶æ¢å¤åŸåˆ—è¡¨
            if (!keyword || keyword.trim() === '') {
                groupList.style.display = 'block';
                searchResult.style.display = 'none';
                return;
            }
            
            // éšè—åŸåˆ—è¡¨,æ˜¾ç¤ºæœç´¢ç»“æœ
            groupList.style.display = 'none';
            searchResult.style.display = 'block';
            
            // æ”¶é›†æ‰€æœ‰åŒ¹é…çš„æˆå‘˜
            const matchedMembers = [];
            const groups = memberData[type];
            
            for (let groupName in groups) {
                groups[groupName].forEach(member => {
                    if (member.toLowerCase().includes(keyword.toLowerCase())) {
                        matchedMembers.push({
                            name: member,
                            group: groupName
                        });
                    }
                });
            }
            
            // ç”Ÿæˆæœç´¢ç»“æœåˆ—è¡¨
            if (matchedMembers.length > 0) {
                let html = '<div class="search-result-container">';
                
                matchedMembers.forEach(item => {
                    const isSelected = filterState[type] && filterState[type].includes(item.name);
                    const activeClass = isSelected ? 'active' : '';
                    
                    html += `
                        <div class="list-item ${activeClass}" data-value="${item.name}" onclick="toggleMemberInSearch('${type}', '${item.name}', this)">
                            <div>
                                <div style="font-size: 14px; color: #333;">${item.name}</div>
                                <div style="font-size: 12px; color: #999; margin-top: 2px;">${item.group}</div>
                            </div>
                            <span class="check-icon">âœ“</span>
                        </div>
                    `;
                });
                
                html += '</div>';
                searchResult.innerHTML = html;
            } else {
                searchResult.innerHTML = '<div class="search-result-empty">æœªæ‰¾åˆ°åŒ¹é…çš„æˆå‘˜</div>';
            }
        }

        // åœ¨æœç´¢ç»“æœä¸­åˆ‡æ¢æˆå‘˜é€‰ä¸­çŠ¶æ€
        function toggleMemberInSearch(type, member, element) {
            element.classList.toggle('active');
            
            if (element.classList.contains('active')) {
                if (!filterState[type].includes(member)) {
                    filterState[type].push(member);
                }
            } else {
                filterState[type] = filterState[type].filter(m => m !== member);
            }
            
            updateMemberDisplay(type);
            updateFilterBadge();
            updateNavDots();
        }

        // ========== ä»“åº“é€‰æ‹©ç›¸å…³ ==========
        
        function updateWarehouseDisplay() {
            const selectedInline = document.getElementById('warehouseSelectedInline');
            if (filterState.warehouse) {
                const warehouseMap = {
                    'hq': 'æ€»éƒ¨ä»“',
                    'east': 'åä¸œä»“',
                    'south': 'åå—ä»“',
                    'north': 'ååŒ—ä»“',
                    'west': 'åè¥¿ä»“'
                };
                selectedInline.innerHTML = `<span class="brand-selected-text">${warehouseMap[filterState.warehouse]}</span>`;
            } else {
                selectedInline.innerHTML = '';
            }
        }
        
        function openWarehouseSelect() {
            const items = document.querySelectorAll('#warehouseListItems .list-item');
            
            // åŒæ­¥é€‰ä¸­çŠ¶æ€
            items.forEach(item => {
                if (filterState.warehouse === item.dataset.value) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
                
                // æ·»åŠ ç‚¹å‡»äº‹ä»¶(å•é€‰é€»è¾‘æ”¯æŒå–æ¶ˆ)
                item.onclick = function() {
                    const value = this.dataset.value;
                    
                    if (this.classList.contains('active')) {
                        // å–æ¶ˆé€‰ä¸­
                        this.classList.remove('active');
                        filterState.warehouse = null;
                    } else {
                        // é€‰ä¸­æ–°çš„
                        items.forEach(i => i.classList.remove('active'));
                        this.classList.add('active');
                        filterState.warehouse = value;
                    }
                };
            });
            
            document.getElementById('warehousePage').classList.add('show');
        }

        function closeWarehouseSelect() {
            document.getElementById('warehousePage').classList.remove('show');
        }

        function confirmWarehouseSelect() {
            updateWarehouseDisplay();
            updateFilterBadge();
            updateNavDots();
            closeWarehouseSelect();
        }

        // é‡ç½®ä»“åº“é€‰æ‹©
        function resetWarehouseSelect() {
            // æ¸…ç©ºé€‰æ‹©çŠ¶æ€
            filterState.warehouse = null;
            
            // ç§»é™¤æ‰€æœ‰activeçŠ¶æ€
            const items = document.querySelectorAll('#warehouseListItems .list-item');
            items.forEach(item => item.classList.remove('active'));
            
            // æ›´æ–°æ˜¾ç¤º
            updateWarehouseDisplay();
            updateFilterBadge();
            updateNavDots();
        }

        // ç‚¹å‡»å¤–éƒ¨å…³é—­æ’åºä¸‹æ‹‰
        document.addEventListener('click', function(e) {
            if (!e.target.closest('#sortBtn') && !e.target.closest('.sort-dropdown')) {
                closeSortDropdown();
            }
        });

        // åˆå§‹åŒ–
        updateFilterBadge();
        updateNavDots();
        updateBrandSelected();
        updateWarehouseDisplay();
        updateMemberDisplay('staff');
        updateMemberDisplay('authenticator');
        updateMemberDisplay('quoter');
    </script>
</body>
</html>